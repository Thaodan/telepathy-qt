diff -ruNx .bzr -x debian/ telepathy-qt-0.9.3/cmake/modules/FindQt5.cmake telepathy-qt/cmake/modules/FindQt5.cmake
--- telepathy-qt-0.9.3/cmake/modules/FindQt5.cmake	2012-07-13 19:40:23.000000000 +0200
+++ telepathy-qt/cmake/modules/FindQt5.cmake	1970-01-01 01:00:00.000000000 +0100
@@ -1,164 +0,0 @@
-# - Find Qt5
-# This module can be used to find Qt5.
-# The most important issues are that Qt5 pkgconfig files are installed with PKG_CONFIG_PATH properly
-# set, and that Qt5 qmake is available via the system path.
-# This module defines a number of key variables and macros.
-#
-#  Below is a detailed list of variables that FindQt5.cmake sets.
-#  QT_FOUND                     If false, don't try to use Qt.
-#  QT5_FOUND                    If false, don't try to use Qt5.
-#
-#  QT_VERSION_MAJOR             The major version of Qt found.
-#  QT_VERSION_MINOR             The minor version of Qt found.
-#  QT_VERSION_PATCH             The patch version of Qt found.
-#
-#  QT_BINARY_DIR                Path to "bin" of Qt4
-#  QT_DOC_DIR                   Path to "doc" of Qt4
-#
-#  QT_QTCORE_FOUND              True if QtCore was found.
-#  QT_QTGUI_FOUND               True if QtGui was found.
-#  QT_QTDBUS_FOUND              True if QtDBus was found.
-#  QT_QTNETWORK_FOUND           True if QtNetwork was found.
-#  QT_QTTEST_FOUND              True if QtTest was found.
-#  QT_QTWIDGETS_FOUND           True if QtWidgets was found.
-#  QT_QTXML_FOUND               True if QtXml was found.
-#
-#  QT_INCLUDES                  List of paths to all include directories of Qt5.
-#  QT_INCLUDE_DIR               Path to "include" of Qt4
-#  QT_QTCORE_INCLUDE_DIR        Path to "include/QtCore"
-#  QT_QTDBUS_INCLUDE_DIR        Path to "include/QtDBus"
-#  QT_QTGUI_INCLUDE_DIR         Path to "include/QtGui"
-#  QT_QTNETWORK_INCLUDE_DIR     Path to "include/QtNetwork"
-#  QT_QTTEST_INCLUDE_DIR        Path to "include/QtTest"
-#  QT_QTWIDGETS_INCLUDE_DIR     Path to "include/QtWidgets"
-#  QT_QTXML_INCLUDE_DIR         Path to "include/QtXml"
-#
-#  QT_LIBRARIES                 List of paths to all libraries of Qt5.
-#  QT_LIBRARY_DIR               Path to "lib" of Qt4
-#  QT_QTCORE_LIBRARY            The QtCore library
-#  QT_QTDBUS_LIBRARY            The QtDBus library
-#  QT_QTGUI_LIBRARY             The QtGui library
-#  QT_QTNETWORK_LIBRARY         The QtNetwork library
-#  QT_QTTEST_LIBRARY            The QtTest library
-#  QT_QTWIDGETS_LIBRARY         The QtWidgets library
-#  QT_QTXML_LIBRARY             The QtXml library
-#
-# also defined, but NOT for general use are
-#  QT_MOC_EXECUTABLE            Where to find the moc tool
-#  QT_CONFIG_FLAGS              Flags used when building Qt
-
-# Copyright (C) 2001-2009 Kitware, Inc.
-# Copyright (C) 2011 Collabora Ltd. <http://www.collabora.co.uk/>
-# Copyright (C) 2011 Nokia Corporation
-#
-# Redistribution and use is allowed according to the terms of the BSD license.
-# For details see the accompanying COPYING-CMAKE-SCRIPTS file.
-
-IF(QT_INCLUDES AND QT_LIBRARIES AND QT_MAJOR_VERSION MATCHES 5)
-  # Already in cache, be silent
-  SET(QT_FOUND TRUE)
-  SET(QT5_FOUND TRUE)
-  RETURN()
-ENDIF(QT_INCLUDES AND QT_LIBRARIES AND QT_MAJOR_VERSION MATCHES 5)
-
-IF(NOT QT_QMAKE_EXECUTABLE)
-  FIND_PROGRAM(QT_QMAKE_EXECUTABLE_FINDQT NAMES qmake qmake5 qmake-qt5
-               PATHS "${QT_SEARCH_PATH}/bin" "$ENV{QTDIR}/bin")
-  SET(QT_QMAKE_EXECUTABLE ${QT_QMAKE_EXECUTABLE_FINDQT} CACHE PATH "Qt qmake program.")
-ENDIF(NOT QT_QMAKE_EXECUTABLE)
-
-EXEC_PROGRAM(${QT_QMAKE_EXECUTABLE} ARGS "-query QT_VERSION" OUTPUT_VARIABLE QTVERSION)
-IF(NOT QTVERSION MATCHES "5.*")
-  SET(QT_FOUND FALSE)
-  SET(QT5_FOUND FALSE)
-  IF(Qt5_FIND_REQUIRED)
-    MESSAGE(FATAL_ERROR "CMake was unable to find Qt5, put qmake in your path or set QTDIR/QT_QMAKE_EXECUTABLE.")
-  ENDIF(Qt5_FIND_REQUIRED)
-  RETURN()
-ENDIF(NOT QTVERSION MATCHES "5.*")
-
-FIND_PACKAGE(PkgConfig REQUIRED)
-
-IF(NOT Qt5_FIND_COMPONENTS)
-  SET(_COMPONENTS QtCore QtDBus QtGui QtNetwork QtTest QtWidgets QtXml)
-ELSE(NOT Qt5_FIND_COMPONENTS)
-  SET(_COMPONENTS ${Qt5_FIND_COMPONENTS})
-ENDIF(NOT Qt5_FIND_COMPONENTS)
-
-FOREACH(_COMPONENT ${_COMPONENTS})
-  STRING(TOUPPER ${_COMPONENT} _COMPONENT_UPPER)
-  IF(NOT QT_${_COMPONENT_UPPER}_FOUND)
-    IF(Qt5_FIND_REQUIRED)
-      PKG_CHECK_MODULES(PC_${_COMPONENT} REQUIRED ${_COMPONENT}>=${QT_MIN_VERSION})
-    ELSE(Qt5_FIND_REQUIRED)
-      PKG_CHECK_MODULES(PC_${_COMPONENT} QUIET ${_COMPONENT}>=${QT_MIN_VERSION})
-    ENDIF(Qt5_FIND_REQUIRED)
-
-    SET(QT_${_COMPONENT_UPPER}_INCLUDE_DIR ${PC_${_COMPONENT}_INCLUDE_DIRS})
-
-    FIND_LIBRARY(QT_${_COMPONENT_UPPER}_LIBRARY
-                 NAMES ${_COMPONENT}
-                 HINTS
-                 ${PC_${_COMPONENT}_LIBDIR})
-
-    SET(QT_${_COMPONENT_UPPER}_FOUND ${PC_${_COMPONENT}_FOUND})
-
-    #MESSAGE(STATUS "COMPONENT ${_COMPONENT_UPPER}:")
-    #MESSAGE(STATUS "  QT_${_COMPONENT_UPPER}_LIBRARY: ${QT_${_COMPONENT_UPPER}_LIBRARY}")
-    #MESSAGE(STATUS "  QT_${_COMPONENT_UPPER}_INCLUDE_DIR: ${QT_${_COMPONENT_UPPER}_INCLUDE_DIR}")
-    #MESSAGE(STATUS "  QT_${_COMPONENT_UPPER}_FOUND: ${QT_${_COMPONENT_UPPER}_FOUND}")
-
-    SET(QT_INCLUDES ${QT_INCLUDES} ${QT_${_COMPONENT_UPPER}_INCLUDE_DIR})
-    SET(QT_LIBRARIES ${QT_LIBRARIES} ${QT_${_COMPONENT_UPPER}_INCLUDE_DIR})
-    MARK_AS_ADVANCED(QT_${_COMPONENT_UPPER}_LIBRARY QT_${_COMPONENT_UPPER}_INCLUDE_DIR)
-  ENDIF(NOT QT_${_COMPONENT_UPPER}_FOUND)
-ENDFOREACH(_COMPONENT)
-
-#MESSAGE(STATUS "QT_LIBRARIES: ${QT_LIBRARIES}")
-#MESSAGE(STATUS "QT_INCLUDES: ${QT_INCLUDES}")
-
-STRING(REGEX REPLACE "^([0-9]+)\\.[0-9]+\\.[0-9]+.*" "\\1" QT_VERSION_MAJOR "${QTVERSION}")
-STRING(REGEX REPLACE "^[0-9]+\\.([0-9])+\\.[0-9]+.*" "\\1" QT_VERSION_MINOR "${QTVERSION}")
-STRING(REGEX REPLACE "^[0-9]+\\.[0-9]+\\.([0-9]+).*" "\\1" QT_VERSION_PATCH "${QTVERSION}")
-
-IF(NOT QT_INCLUDE_DIR)
-  EXEC_PROGRAM(${QT_QMAKE_EXECUTABLE} ARGS "-query QT_INSTALL_HEADERS" OUTPUT_VARIABLE QTHEADERS)
-  SET(QT_INCLUDE_DIR ${QTHEADERS} CACHE INTERNAL "" FORCE)
-ENDIF(NOT QT_INCLUDE_DIR)
-
-IF(NOT QT_LIBRARY_DIR)
-  EXEC_PROGRAM(${QT_QMAKE_EXECUTABLE} ARGS "-query QT_INSTALL_LIBS" OUTPUT_VARIABLE QTLIBS)
-  SET(QT_LIBRARY_DIR ${QTLIBS} CACHE INTERNAL "" FORCE)
-ENDIF(NOT QT_LIBRARY_DIR)
-
-IF(NOT QT_BINARY_DIR)
-  EXEC_PROGRAM(${QT_QMAKE_EXECUTABLE} ARGS "-query QT_INSTALL_BINS" OUTPUT_VARIABLE QTBINS)
-  SET(QT_BINARY_DIR ${QTBINS} CACHE INTERNAL "" FORCE)
-ENDIF(NOT QT_BINARY_DIR)
-
-IF(NOT QT_DOC_DIR)
-  EXEC_PROGRAM(${QT_QMAKE_EXECUTABLE} ARGS "-query QT_INSTALL_DOCS" OUTPUT_VARIABLE QTDOCS)
-  SET(QT_DOC_DIR ${QTDOCS} CACHE INTERNAL "" FORCE)
-ENDIF(NOT QT_DOC_DIR)
-
-IF(NOT QT_MOC_EXECUTABLE)
-  FIND_PROGRAM(QT_MOC_EXECUTABLE NAMES moc moc5 moc-qt5 PATHS ${QT_BINARY_DIR}
-               NO_DEFAULT_PATH NO_CMAKE_FIND_ROOT_PATH)
-ENDIF(NOT QT_MOC_EXECUTABLE)
-
-MARK_AS_ADVANCED(QT_INCLUDES QT_INCLUDE_DIR
-                 QT_LIBRARIES QT_LIBRARY_DIR
-                 QT_BINARY_DIR
-                 QT_DOC_DIR
-                 QT_QMAKE_EXECUTABLE_FINDQT QT_QMAKE_EXECUTABLE QT_MOC_EXECUTABLE)
-
-# Invokes pkgconfig, cleans up the result and sets variables
-EXECUTE_PROCESS(COMMAND ${PKG_CONFIG_EXECUTABLE} --variable qt_config QtCore
-    OUTPUT_VARIABLE _pkgconfig_flags
-    RESULT_VARIABLE _pkgconfig_failed)
-STRING(REPLACE " " ";" QT_CONFIG_FLAGS "${_pkgconfig_flags}")
-
-INCLUDE(Qt5Macros)
-
-SET(QT_FOUND TRUE)
-SET(QT5_FOUND TRUE)
diff -ruNx .bzr -x debian/ telepathy-qt-0.9.3/cmake/modules/FindQt.cmake telepathy-qt/cmake/modules/FindQt.cmake
--- telepathy-qt-0.9.3/cmake/modules/FindQt.cmake	2012-07-13 19:40:23.000000000 +0200
+++ telepathy-qt/cmake/modules/FindQt.cmake	1970-01-01 01:00:00.000000000 +0100
@@ -1,85 +0,0 @@
-# - Searches for Qt4 or Qt5.
-
-# Copyright (C) 2001-2009 Kitware, Inc.
-# Copyright (C) 2011 Collabora Ltd. <http://www.collabora.co.uk/>
-# Copyright (C) 2011 Nokia Corporation
-#
-# Redistribution and use is allowed according to the terms of the BSD license.
-# For details see the accompanying COPYING-CMAKE-SCRIPTS file.
-
-IF(NOT QT_QMAKE_EXECUTABLE)
-  FIND_PROGRAM(QT_QMAKE_EXECUTABLE_FINDQT NAMES qmake qmake4 qmake-qt4 qmake5 qmake-qt5
-               PATHS "${QT_SEARCH_PATH}/bin" "$ENV{QTDIR}/bin")
-  SET(QT_QMAKE_EXECUTABLE ${QT_QMAKE_EXECUTABLE_FINDQT} CACHE PATH "Qt qmake program.")
-ENDIF(NOT QT_QMAKE_EXECUTABLE)
-
-# now find qmake
-IF(QT_QMAKE_EXECUTABLE)
-  EXEC_PROGRAM(${QT_QMAKE_EXECUTABLE} ARGS "-query QT_VERSION" OUTPUT_VARIABLE QTVERSION)
-  IF(QTVERSION MATCHES "4.*")
-    SET(QT4_INSTALLED TRUE)
-  ENDIF(QTVERSION MATCHES "4.*")
-  IF(QTVERSION MATCHES "5.*")
-    SET(QT5_INSTALLED TRUE)
-  ENDIF(QTVERSION MATCHES "5.*")
-ENDIF(QT_QMAKE_EXECUTABLE)
-
-IF(NOT DESIRED_QT_VERSION)
-  IF(QT4_INSTALLED)
-    SET(DESIRED_QT_VERSION 4 CACHE STRING "Pick a version of Qt to use: 4 or 5")
-  ENDIF(QT4_INSTALLED)
-  IF(QT5_INSTALLED)
-    SET(DESIRED_QT_VERSION 5 CACHE STRING "Pick a version of Qt to use: 4 or 5")
-  ENDIF(QT5_INSTALLED)
-ENDIF(NOT DESIRED_QT_VERSION)
-
-IF(DESIRED_QT_VERSION MATCHES 4)
-  SET(Qt4_FIND_REQUIRED ${Qt_FIND_REQUIRED})
-  SET(Qt4_FIND_QUIETLY  ${Qt_FIND_QUIETLY})
-  SET(QT_MIN_VERSION    ${QT4_MIN_VERSION})
-  SET(QT_MAX_VERSION    ${QT4_MAX_VERSION})
-  INCLUDE(FindQt4)
-ENDIF(DESIRED_QT_VERSION MATCHES 4)
-IF(DESIRED_QT_VERSION MATCHES 5)
-  SET(Qt5_FIND_REQUIRED ${Qt_FIND_REQUIRED})
-  SET(Qt5_FIND_QUIETLY  ${Qt_FIND_QUIETLY})
-  SET(QT_MIN_VERSION    ${QT5_MIN_VERSION})
-  SET(QT_MAX_VERSION    ${QT5_MAX_VERSION})
-  INCLUDE(FindQt5)
-ENDIF(DESIRED_QT_VERSION MATCHES 5)
-
-IF(NOT QT4_INSTALLED AND NOT QT5_INSTALLED)
-  IF(Qt_FIND_REQUIRED)
-    MESSAGE(SEND_ERROR "CMake was unable to find any Qt versions, put qmake in your path, or set QTDIR/QT_QMAKE_EXECUTABLE.")
-  ENDIF(Qt_FIND_REQUIRED)
-ELSE(NOT QT4_INSTALLED AND NOT QT5_INSTALLED)
-  IF(NOT QT_FOUND)
-    IF(Qt_FIND_REQUIRED)
-      MESSAGE(FATAL_ERROR "CMake was unable to find Qt version: ${DESIRED_QT_VERSION}, put qmake in your path or set QTDIR/QT_QMAKE_EXECUTABLE.")
-    ELSE(Qt_FIND_REQUIRED)
-      MESSAGE("CMake was unable to find Qt version: ${DESIRED_QT_VERSION}, put qmake in your path or set QTDIR/QT_QMAKE_EXECUTABLE.")
-    ENDIF(Qt_FIND_REQUIRED)
-  ENDIF(NOT QT_FOUND)
-ENDIF(NOT QT4_INSTALLED AND NOT QT5_INSTALLED)
-
-MACRO(QT_GET_MOC_FLAGS moc_flags)
-  IF(QT_VERSION_MAJOR MATCHES 4)
-    QT4_GET_MOC_FLAGS(${moc_flags})
-  ELSE(QT_VERSION_MAJOR MATCHES 4)
-    IF(QT_VERSION_MAJOR MATCHES 5)
-      QT5_GET_MOC_FLAGS(${moc_flags})
-    ENDIF(QT_VERSION_MAJOR MATCHES 5)
-  ENDIF(QT_VERSION_MAJOR MATCHES 4)
-ENDMACRO(QT_GET_MOC_FLAGS)
-
-MACRO(QT_CREATE_MOC_COMMAND infile outfile moc_flags moc_options)
-  IF(QT_VERSION_MAJOR MATCHES 4)
-    QT4_CREATE_MOC_COMMAND(${infile} ${outfile} "${moc_flags}" "${moc_options}")
-  ELSE(QT_VERSION_MAJOR MATCHES 4)
-    IF(QT_VERSION_MAJOR MATCHES 5)
-      QT5_CREATE_MOC_COMMAND(${infile} ${outfile} "${moc_flags}" "${moc_options}")
-    ENDIF(QT_VERSION_MAJOR MATCHES 5)
-  ENDIF(QT_VERSION_MAJOR MATCHES 4)
-ENDMACRO(QT_CREATE_MOC_COMMAND)
-
-MARK_AS_ADVANCED(QT_QMAKE_EXECUTABLE_FINDQT)
diff -ruNx .bzr -x debian/ telepathy-qt-0.9.3/cmake/modules/TpQtMacros.cmake telepathy-qt/cmake/modules/TpQtMacros.cmake
--- telepathy-qt-0.9.3/cmake/modules/TpQtMacros.cmake	2012-07-13 19:40:23.000000000 +0200
+++ telepathy-qt/cmake/modules/TpQtMacros.cmake	2013-02-24 19:22:09.168508000 +0100
@@ -176,15 +176,15 @@
 
 # add the -i option to QT_GENERATE_MOC
 function(TPQT_GENERATE_MOC_I infile outfile)
-    qt_get_moc_flags(moc_flags)
+    qt5_get_moc_flags(moc_flags)
     get_filename_component(abs_infile ${infile} ABSOLUTE)
-    qt_create_moc_command(${abs_infile} ${outfile} "${moc_flags}" "-i")
+    qt5_create_moc_command(${abs_infile} ${outfile} "${moc_flags}" "-i")
     set_source_files_properties(${outfile} PROPERTIES SKIP_AUTOMOC TRUE)  # dont run automoc on this file
 endfunction(TPQT_GENERATE_MOC_I)
 
 # same as tpqt_generate_moc_i, but lets the caller specify a list of targets which the mocs should depend on
 function(TPQT_GENERATE_MOC_I_TARGET_DEPS infile outfile)
-    qt_get_moc_flags(moc_flags)
+    qt5_get_moc_flags(moc_flags)
     get_filename_component(abs_infile ${infile} ABSOLUTE)
     tpqt_create_moc_command_target_deps(${abs_infile} ${outfile} "${moc_flags}" "-i" ${ARGN})
     set_source_files_properties(${outfile} PROPERTIES SKIP_AUTOMOC TRUE)  # dont run automoc on this file
@@ -404,7 +404,7 @@
 macro(tpqt_add_generic_unit_test _fancyName _name)
     tpqt_generate_moc_i(${_name}.cpp ${CMAKE_CURRENT_BINARY_DIR}/_gen/${_name}.cpp.moc.hpp)
     add_executable(test-${_name} ${_name}.cpp ${CMAKE_CURRENT_BINARY_DIR}/_gen/${_name}.cpp.moc.hpp)
-    target_link_libraries(test-${_name} ${QT_QTCORE_LIBRARY} ${QT_QTNETWORK_LIBRARY} ${QT_QTXML_LIBRARY} ${QT_QTTEST_LIBRARY} telepathy-qt${QT_VERSION_MAJOR} tp-qt-tests ${TP_QT_EXECUTABLE_LINKER_FLAGS} ${ARGN})
+    target_link_libraries(test-${_name} ${Qt5Core_LIBRARIES} ${Qt5Network_LIBRARIES} ${Qt5Xml_LIBRARIES} ${Qt5Test_LIBRARIES} telepathy-qt${Qt5Core_VERSION_MAJOR} tp-qt-tests ${TP_QT_EXECUTABLE_LINKER_FLAGS} ${ARGN})
     add_test(${_fancyName} ${SH} ${CMAKE_CURRENT_BINARY_DIR}/runGenericTest.sh ${CMAKE_CURRENT_BINARY_DIR}/test-${_name})
     list(APPEND _telepathy_qt_test_cases test-${_name})
 
@@ -415,7 +415,7 @@
 macro(tpqt_add_dbus_unit_test _fancyName _name)
     tpqt_generate_moc_i(${_name}.cpp ${CMAKE_CURRENT_BINARY_DIR}/_gen/${_name}.cpp.moc.hpp)
     add_executable(test-${_name} ${_name}.cpp ${CMAKE_CURRENT_BINARY_DIR}/_gen/${_name}.cpp.moc.hpp)
-    target_link_libraries(test-${_name} ${QT_QTCORE_LIBRARY} ${QT_QTDBUS_LIBRARY} ${QT_QTNETWORK_LIBRARY} ${QT_QTXML_LIBRARY} ${QT_QTTEST_LIBRARY} telepathy-qt${QT_VERSION_MAJOR} tp-qt-tests ${TP_QT_EXECUTABLE_LINKER_FLAGS} ${ARGN})
+    target_link_libraries(test-${_name} ${Qt5Core_LIBRARIES} ${Qt5DBus_LIBRARIES} ${Qt5Network_LIBRARIES} ${Qt5Xml_LIBRARIES} ${Qt5Test_LIBRARIES} telepathy-qt${Qt5Core_VERSION_MAJOR} tp-qt-tests ${TP_QT_EXECUTABLE_LINKER_FLAGS} ${ARGN})
     set(with_session_bus ${CMAKE_CURRENT_BINARY_DIR}/runDbusTest.sh)
     add_test(${_fancyName} ${SH} ${with_session_bus} ${CMAKE_CURRENT_BINARY_DIR}/test-${_name})
     list(APPEND _telepathy_qt_test_cases test-${_name})
@@ -488,6 +488,6 @@
     if (IS_ABSOLUTE "${in}")
         set(${out} "${in}")
     else (IS_ABSOLUTE "${in}")
-        set(${out} "\${TELEPATHY_QT${QT_VERSION_MAJOR}_INSTALL_DIR}/${in}")
+        set(${out} "\${TELEPATHY_QT${Qt5Core_VERSION_MAJOR}_INSTALL_DIR}/${in}")
     endif (IS_ABSOLUTE "${in}")
 endmacro(make_install_path_absolute out in)
diff -ruNx .bzr -x debian/ telepathy-qt-0.9.3/CMakeLists.txt telepathy-qt/CMakeLists.txt
--- telepathy-qt-0.9.3/CMakeLists.txt	2012-07-13 19:40:23.000000000 +0200
+++ telepathy-qt/CMakeLists.txt	2013-02-24 19:22:09.168508000 +0100
@@ -76,13 +76,6 @@
 # external dependencies
 
 # Required dependencies
-# Find qt4 version >= 4.6 or qt5 >= 5.0.0
-set(QT4_MIN_VERSION "4.6.0")
-set(QT4_MAX_VERSION "5.0.0")
-set(QT5_MIN_VERSION "5.0.0")
-set(QT5_MAX_VERSION "6.0.0")
-find_package(Qt REQUIRED)
-
 foreach(flag ${QT_CONFIG_FLAGS})
     if (${flag} MATCHES "reduce_relocations")
         set(TP_QT_EXECUTABLE_LINKER_FLAGS "-fPIE")
@@ -92,11 +85,17 @@
 
 # This value contains the library's SOVERSION. This value is to be increased everytime an API/ABI break
 # occurs, and will be used for the SOVERSION of the generated shared libraries.
-if (${QT_VERSION_MAJOR} EQUAL 4)
-    set(TP_QT_ABI_VERSION 2)
-else (${QT_VERSION_MAJOR} EQUAL 4)
-    set(TP_QT_ABI_VERSION 0)
-endif (${QT_VERSION_MAJOR} EQUAL 4)
+# set the Qt version to 5 explicitelly
+set(QT_MIN_VERSION "5.0.0")
+set(QT_MAX_VERSION "6.0.0")
+find_package(Qt5Core REQUIRED)
+find_package(Qt5DBus REQUIRED)
+find_package(Qt5Network REQUIRED)
+find_package(Qt5Xml REQUIRED)
+find_package(Qt5Widgets REQUIRED)
+find_package(Qt5Test REQUIRED)
+
+set(TP_QT_ABI_VERSION 0)
 
 # This variable is used for the library's long version. It is generated dynamically, so don't change its
 # value! Change TP_QT_ABI_VERSION and TP_QT_*_VERSION instead.
@@ -126,10 +125,17 @@
 
 include_directories(${CMAKE_SOURCE_DIR}
                     ${CMAKE_BINARY_DIR}
-                    ${QT_INCLUDES})
+                    ${Qt5Core_INCLUDE_DIRS}
+                    ${Qt5DBus_INCLUDE_DIRS}
+                    ${Qt5Network_INCLUDE_DIRS}
+                    ${Qt5Xml_INCLUDE_DIRS}
+                    ${Qt5Widgets_INCLUDE_DIRS}
+                    ${Qt5Test_INCLUDE_DIRS})
 
 add_definitions(-DQT_NO_CAST_FROM_ASCII)
 
+set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -fPIC")
+
 set(ENABLE_DEBUG_OUTPUT ON CACHE BOOL "If activated, compiles support for printing debug output to stderr")
 if (ENABLE_DEBUG_OUTPUT)
     add_definitions(-DENABLE_DEBUG)
@@ -137,7 +143,7 @@
 
 # Check for Qt Glib support
 include(CheckCXXSourceCompiles)
-set(CMAKE_REQUIRED_INCLUDES ${QT_INCLUDES})
+set(CMAKE_REQUIRED_INCLUDES "${Qt5Core_INCLUDE_DIRS}")
 set(CMAKE_REQUIRED_DEFINITIONS "")
 # set the flags (-fPIE) here so that CHECK_CXX_SOURCE_COMPILES works properly if qt5 was built with
 # -reduce-locations
diff -ruNx .bzr -x debian/ telepathy-qt-0.9.3/debian/changelog telepathy-qt/debian/changelog
--- telepathy-qt-0.9.3/debian/changelog	1970-01-01 01:00:00.000000000 +0100
+++ telepathy-qt/debian/changelog	2013-02-24 19:22:09.168508000 +0100
@@ -0,0 +1,171 @@
+telepathy-qt (0.9.3.3) quantal; urgency=low
+
+  * Fix pkgconfig files.
+
+ -- Gustavo Pichorim Boiko <gustavo.boiko@canonical.com>  Wed, 23 Jan 2013 19:55:22 -0200
+
+telepathy-qt (0.9.3.2) quantal; urgency=low
+
+  * Adapt it to work with Qt5 final.
+
+ -- Gustavo Pichorim Boiko <gustavo.boiko@canonical.com>  Mon, 21 Jan 2013 12:01:18 -0200
+
+telepathy-qt (0.9.3.1) quantal; urgency=low
+
+  * force setInterfaces() on call-content.cpp, otherwise dtmf doesn't work
+
+ -- Tiago Salem Herrmann <tiago.herrmann@canonical.com>  Thu, 06 Dec 2012 18:55:30 -0200
+
+telepathy-qt (0.9.3-0ubuntu2marumbi1) quantal; urgency=low
+
+  * Initial port to Qt5
+
+ -- Tiago Salem Herrmann <tiago.herrmann@canonical.com>  Mon, 15 Oct 2012 14:11:47 -0300
+
+telepathy-qt (0.9.3-0ubuntu2) quantal; urgency=low
+
+  * Update symbols file for amd64, armhf, armel, and powerpc.
+
+ -- Adam Conrad <adconrad@ubuntu.com>  Fri, 31 Aug 2012 16:33:26 -0600
+
+telepathy-qt (0.9.3-0ubuntu1) quantal; urgency=low
+
+  * New upstream release
+  * Remove fix_ftbfs_gcc47.patch now upstream
+  * Remove fvisibility-inlines-hidden.patch now upstream
+
+ -- Jonathan Riddell <jriddell@ubuntu.com>  Thu, 09 Aug 2012 14:16:43 +0100
+
+telepathy-qt (0.9.1-4) unstable; urgency=low
+
+  * Add extra (optional=inline) markings on all inline
+    symbols that still appear in the symbols file and confirm
+    it with pkgkde-symbolshelper for all architectures. (Closes: #676259)
+
+ -- George Kiagiadakis <kiagiadakis.george@gmail.com>  Sun, 17 Jun 2012 11:08:30 +0200
+
+telepathy-qt (0.9.1-3) unstable; urgency=low
+
+  * Add patch fvisibility-inlines-hidden.patch to pass
+    -fvisibility-inlines-hidden to the compiler and avoid
+    having inline functions in the symbols file.
+  * Cleanup libtelepathy-qt4-2.symbols from all inline
+    functions to fix FTBFS (Closes: #676259).
+
+ -- George Kiagiadakis <kiagiadakis.george@gmail.com>  Thu, 07 Jun 2012 00:20:45 +0200
+
+telepathy-qt (0.9.1-2) unstable; urgency=low
+
+  * Team upload.
+  * Fix FTBFS due to jquery symlink creation
+
+ -- Laurent Bigonville <bigon@debian.org>  Tue, 05 Jun 2012 12:47:15 +0200
+
+telepathy-qt (0.9.1-1) unstable; urgency=low
+
+  * Team upload.
+  * New upstream release. (Closes: #647835)
+    - Upstream source package renamed to telepathy-qt
+
+  [ Laurent Bigonville ]
+  * Build against farstream instead of farsight (Closes: #672107)
+  * Bump soname of both libraries
+  * Bump build-dependencies
+  * Switch to dpkg-source 3.0 (quilt) format
+  * debian/control: Bump Standards-Version to 3.9.3 (no further changes)
+  * Bump debhelper compatibility to 9
+  * debian/watch: Update watch file to match new upstream name
+  * Link jquery.js file to the one provided by libjs-jquery
+
+  [ George Kiagiadakis ]
+  * Change the gcc-4.7 ftbfs patch to use the upstream patch.
+  * Switch build system to dh.
+  * Convert to multiarch.
+  * Install the TelepathyQt4*Config.cmake and related files.
+  * Add symbols files.
+  * Update README.source.
+  * Update debian/copyright.
+
+ -- Laurent Bigonville <bigon@debian.org>  Mon, 04 Jun 2012 14:33:00 +0200
+
+telepathy-qt4 (0.7.1-1.1) unstable; urgency=low
+
+  * Non-maintainer upload.
+
+  [ Cyril Brulebois ]
+  * Fix FTBFS with gcc 4.7 by fixing missing <unistd.h> includes
+    (Closes: #667391).
+
+ -- gregor herrmann <gregoa@debian.org>  Mon, 28 May 2012 16:21:33 +0200
+
+telepathy-qt4 (0.7.1-1) unstable; urgency=low
+
+  * New upstream release.
+  * debian/control: Update dependency version requirements.
+  * debian/rules: Add code to bump makeshlibs args version automatically.
+  * Bump standards-version to 3.9.2; no changes required.
+  * Add myself to uploaders.
+
+ -- George Kiagiadakis <kiagiadakis.george@gmail.com>  Sat, 11 Jun 2011 14:47:18 +0300
+
+telepathy-qt4 (0.5.15-1) experimental; urgency=low
+
+  * New upstream release.
+  * debian/rules: Update to use cmake now.
+  * debian/control: Update Build-Deps for new version.
+  * Bump package name sonames for new library soname.
+  * debian/copyright: Update copyright years.
+
+ -- Jonny Lamb <jonny@debian.org>  Thu, 14 Apr 2011 11:33:54 +0100
+
+telepathy-qt4 (0.3.8-1) unstable; urgency=low
+
+  * New upstream relase.
+  * Make libtelepathy-qt4-dev depend on libtelepathy-farsight-dev,
+    to agree with the header and runtime dependencies on the same.
+  * Add myself to Uploaders.
+
+ -- Adam Conrad <adconrad@0c3.net>  Wed, 25 Aug 2010 16:31:01 -0600
+
+telepathy-qt4 (0.3.6-1) unstable; urgency=low
+
+  [ George Goldberg ]
+  * Update to new upstream release
+
+ -- Jonny Lamb <jonny@debian.org>  Wed, 14 Jul 2010 14:18:54 +0100
+
+telepathy-qt4 (0.3.5-1) unstable; urgency=low
+
+  [ George Goldberg ]
+  * Update to new upstream release
+
+  [ Jonny Lamb ]
+  * debian/control: Upped Standards-Version. (no changes)
+
+ -- Jonny Lamb <jonny@debian.org>  Thu, 24 Jun 2010 18:57:42 +0100
+
+telepathy-qt4 (0.3.2-1) unstable; urgency=low
+
+  [ George Goldberg ]
+  * Update to new upstream release
+  * Build now depends on telepathy-glib >=0.10.0
+
+  [ Jonny Lamb ]
+  * debian/control: Added George and myself to Uploaders.
+
+ -- Jonny Lamb <jonny@debian.org>  Sat, 24 Apr 2010 14:47:07 +0100
+
+telepathy-qt4 (0.2.0-2) unstable; urgency=low
+
+  * Move Build-Depends-Indep to Build-Depends, working around #478524 in
+    sbuild (Closes: #557032)
+  * Disable tests for now, due to race conditions in the test code that can't
+    usefully be debugged on a buildd
+
+ -- Simon McVittie <smcv@debian.org>  Thu, 19 Nov 2009 12:22:40 +0000
+
+telepathy-qt4 (0.2.0-1) unstable; urgency=low
+
+  * Initial Debian packaging (Closes: #539008)
+
+ -- Simon McVittie <smcv@debian.org>  Tue, 10 Nov 2009 14:49:41 +0000
diff -ruNx .bzr -x debian/ telepathy-qt-0.9.3/debian/compat telepathy-qt/debian/compat
--- telepathy-qt-0.9.3/debian/compat	1970-01-01 01:00:00.000000000 +0100
+++ telepathy-qt/debian/compat	2013-02-24 19:22:09.168508000 +0100
@@ -0,0 +1 @@
+9
diff -ruNx .bzr -x debian/ telepathy-qt-0.9.3/debian/control telepathy-qt/debian/control
--- telepathy-qt-0.9.3/debian/control	1970-01-01 01:00:00.000000000 +0100
+++ telepathy-qt/debian/control	2013-02-24 19:22:09.168508000 +0100
@@ -0,0 +1,116 @@
+Source: telepathy-qt
+Section: libs
+Priority: optional
+Maintainer: Kubuntu Developers <kubuntu-devel@lists.ubuntu.com>
+XSBC-Original-Maintainer: Debian Telepathy maintainers <pkg-telepathy-maintainers@lists.alioth.debian.org>
+Uploaders: Simon McVittie <smcv@debian.org>,
+           George Goldberg <george.goldberg@collabora.co.uk>,
+           Jonny Lamb <jonny@debian.org>,
+           Adam Conrad <adconrad@0c3.net>,
+           George Kiagiadakis <kiagiadakis.george@gmail.com>
+Build-Depends: debhelper (>= 9),
+               dpkg-dev (>= 1.16.1~),
+               cmake,
+               doxygen,
+               graphviz,
+               libgstreamer0.10-dev,
+               libgstreamer-plugins-base0.10-dev,
+               qt5-default (>= 5.0),
+               qtbase5-dev (>= 5.0),
+               libfarstream-0.1-dev (>= 0.1.0),
+               libtelepathy-farstream-dev (>= 0.2.2),
+               libtelepathy-glib-dev (>= 0.17.5),
+               pkg-config (>= 0.21),
+               python (>= 2.6),
+               python-dbus,
+               python-dev,
+               python-gobject,
+               libgl-dev,
+               libgles2-mesa-dev
+# * python-dbus and python-gobject can safely be removed if you don't care
+#   about running the regression tests
+# * doxygen and graphviz should be Build-Depends-Indep if #478524 is fixed
+Standards-Version: 3.9.3
+Vcs-Git: git://git.debian.org/git/pkg-telepathy/telepathy-qt.git
+Vcs-Browser: http://git.debian.org/?p=pkg-telepathy/telepathy-qt.git
+Homepage: http://telepathy.freedesktop.org/wiki/
+
+Package: libtelepathy-qt5-0
+Architecture: any
+Multi-Arch: same
+Pre-Depends: ${misc:Pre-Depends}
+Depends: ${shlibs:Depends}, ${misc:Depends}
+Description: Telepathy framework - Qt 5 library
+ This package contains telepathy-qt5, a Qt-based library for Telepathy
+ components.
+ .
+ Telepathy is a D-Bus framework for unifying real time communication,
+ including instant messaging, voice calls and video calls. It abstracts
+ differences between protocols to provide a unified interface for
+ applications.
+
+Package: libtelepathy-qt5-farstream0
+Architecture: any
+Multi-Arch: same
+Pre-Depends: ${misc:Pre-Depends}
+Depends: libtelepathy-qt5-0 (= ${binary:Version}),
+         ${shlibs:Depends},
+         ${misc:Depends}
+Description: Telepathy/Farsight integration - Qt 5 library
+ telepathy-qt5-farstream provides telepathy-qt5 integration with
+ telepathy-farstream, which implements media streaming using GStreamer and
+ Farsight.
+ .
+ Telepathy is a D-Bus framework for unifying real time communication,
+ including instant messaging, voice calls and video calls. It abstracts
+ differences between protocols to provide a unified interface for
+ applications.
+
+Package: libtelepathy-qt5-dev
+Architecture: any
+Section: libdevel
+Depends: qtbase5-dev (>= 5.0),
+         libtelepathy-qt5-0 (= ${binary:Version}),
+         libtelepathy-qt5-farstream0 (= ${binary:Version}),
+         libtelepathy-farstream-dev,
+         pkg-config (>= 0.21),
+         ${shlibs:Depends},
+         ${misc:Depends}
+Suggests: libtelepathy-qt5-doc
+Description: Qt 5 Telepathy library (headers and static library)
+ This package contains development files for telepathy-qt5, a Qt-based
+ library for Telepathy components.
+ .
+ Telepathy is a D-Bus framework for unifying real time communication,
+ including instant messaging, voice calls and video calls. It abstracts
+ differences between protocols to provide a unified interface for
+ applications.
+
+Package: libtelepathy-qt5-dbg
+Architecture: any
+Section: debug
+Priority: extra
+Depends: libtelepathy-qt5-0 (= ${binary:Version}),
+         ${misc:Depends}
+Suggests: libtelepathy-qt5-farstream0 (= ${binary:Version})
+Description: Qt 5 Telepathy library (debug symbols)
+ This package contains support for debugging programs that use telepathy-qt5,
+ a Qt-based library for Telepathy components.
+ .
+ Telepathy is a D-Bus framework for unifying real time communication,
+ including instant messaging, voice calls and video calls. It abstracts
+ differences between protocols to provide a unified interface for
+ applications.
+
+Package: libtelepathy-qt5-doc
+Architecture: all
+Section: doc
+Depends: libjs-jquery, ${misc:Depends}
+Description: Qt 5 Telepathy library (documentation)
+ This package contains HTML documentation for telepathy-qt5, a Qt-based
+ library for Telepathy components.
+ .
+ Telepathy is a D-Bus framework for unifying real time communication,
+ including instant messaging, voice calls and video calls. It abstracts
+ differences between protocols to provide a unified interface for
+ applications.
diff -ruNx .bzr -x debian/ telepathy-qt-0.9.3/debian/copyright telepathy-qt/debian/copyright
--- telepathy-qt-0.9.3/debian/copyright	1970-01-01 01:00:00.000000000 +0100
+++ telepathy-qt/debian/copyright	2013-02-24 19:22:09.168508000 +0100
@@ -0,0 +1,82 @@
+Format: http://www.debian.org/doc/packaging-manuals/copyright-format/1.0/
+Upstream-Name: Telepathy-Qt
+Upstream-Contact:
+    mailto:telepathy@lists.freedesktop.org
+    irc://irc.freenode.net/telepathy
+    http://telepathy.freedesktop.org/
+Upstream-Source: http://telepathy.freedesktop.org/releases/telepathy-qt/
+
+Files: *
+Copyright: © 2008-2012 Collabora Ltd.
+           © 2008-2012 Nokia Corporation
+License: LGPL-2.1+
+
+Files: spec/*
+Copyright: © 2005-2012 Collabora Ltd.
+           © 2005-2011 Nokia Corporation
+           © 2006 INdT
+License: LGPL-2.1+
+
+Files: debian/*
+Copyright: © 2012 George Kiagiadakis <kiagiadakis.george@gmail.com>
+           © 2009-2011 Collabora Ltd.
+           © 2009-2011 Nokia Corporation
+License: LGPL-2.1+
+
+License: LGPL-2.1+
+   This library is free software; you can redistribute it and/or
+   modify it under the terms of the GNU Lesser General Public
+   License as published by the Free Software Foundation; either
+   version 2.1 of the License, or (at your option) any later version.
+   .
+   This library is distributed in the hope that it will be useful,
+   but WITHOUT ANY WARRANTY; without even the implied warranty of
+   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+   Lesser General Public License for more details.
+   .
+   You should have received a copy of the GNU Lesser General Public
+   License along with this library; if not, write to the Free Software
+   Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA
+   .
+   On Debian systems, the complete text of the GNU Lesser General
+   Public License v2.1 can be found in `/usr/share/common-licenses/LGPL-2.1'.
+
+Files: cmake/*
+Copyright: © 2010-2011 Collabora Ltd.
+           © 2011 Nokia Corporation
+           © 2006, 2008 Alexander Neundorf <neundorf@kde.org>
+           © 2010 Dario Freddi <dario.freddi@collabora.co.uk>
+           © 2001-2009 Kitware Inc.
+           © 2006, 2008 Allen Winter <winter@kde.org>
+           © 2007 Simon Edwards <simon@simonzone.com>
+           © 2006 Tim Beaulen <tbscope@gmail.com>
+           © 2012 George Kiagiadakis <george.kiagiadakis@collabora.co.uk>
+           © 2011 Mateu Batle <mateu.batle@collabora.co.uk>
+           © 2008 Kevin Kofler <kevin.kofler@chello.at>
+           © 2008 Helio Chissini de Castro <helio@kde.org>
+           © 2008 Laurent Montel <montel@kde.org>
+           © 2009 Andre Moreira Magalhaes <andrunko@gmail.com>
+           © 2009 Sebastian Trueg <trueg@kde.org>
+License: BSD-3-clause
+    Redistribution and use in source and binary forms, with or without
+    modification, are permitted provided that the following conditions
+    are met:
+    .
+    1. Redistributions of source code must retain the copyright
+    notice, this list of conditions and the following disclaimer.
+    2. Redistributions in binary form must reproduce the copyright
+    notice, this list of conditions and the following disclaimer in the
+    documentation and/or other materials provided with the distribution.
+    3. The name of the author may not be used to endorse or promote products
+    derived from this software without specific prior written permission.
+    .
+    THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR
+    IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
+    OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
+    IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT,
+    INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT
+    NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
+    DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
+    THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
+    (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
+    THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
diff -ruNx .bzr -x debian/ telepathy-qt-0.9.3/debian/gbp.conf telepathy-qt/debian/gbp.conf
--- telepathy-qt-0.9.3/debian/gbp.conf	1970-01-01 01:00:00.000000000 +0100
+++ telepathy-qt/debian/gbp.conf	2013-02-24 19:22:09.168508000 +0100
@@ -0,0 +1,8 @@
+[DEFAULT]
+debian-branch = debian
+upstream-branch = upstream
+pristine-tar = True
+
+[git-buildpackage]
+tarball-dir = ../tarballs/
+export-dir = ../build-area/
diff -ruNx .bzr -x debian/ telepathy-qt-0.9.3/debian/libtelepathy-qt5-0.install telepathy-qt/debian/libtelepathy-qt5-0.install
--- telepathy-qt-0.9.3/debian/libtelepathy-qt5-0.install	1970-01-01 01:00:00.000000000 +0100
+++ telepathy-qt/debian/libtelepathy-qt5-0.install	2013-02-24 19:22:09.168508000 +0100
@@ -0,0 +1 @@
+usr/lib/*/libtelepathy-qt5.so.0*
diff -ruNx .bzr -x debian/ telepathy-qt-0.9.3/debian/libtelepathy-qt5-dev.install telepathy-qt/debian/libtelepathy-qt5-dev.install
--- telepathy-qt-0.9.3/debian/libtelepathy-qt5-dev.install	1970-01-01 01:00:00.000000000 +0100
+++ telepathy-qt/debian/libtelepathy-qt5-dev.install	2013-02-24 19:22:09.168508000 +0100
@@ -0,0 +1,4 @@
+usr/lib/*/*.so
+usr/lib/*/pkgconfig/*.pc
+usr/lib/*/cmake/*
+usr/include/telepathy-qt5
diff -ruNx .bzr -x debian/ telepathy-qt-0.9.3/debian/libtelepathy-qt5-doc.doc-base telepathy-qt/debian/libtelepathy-qt5-doc.doc-base
--- telepathy-qt-0.9.3/debian/libtelepathy-qt5-doc.doc-base	1970-01-01 01:00:00.000000000 +0100
+++ telepathy-qt/debian/libtelepathy-qt5-doc.doc-base	2013-02-24 19:22:09.168508000 +0100
@@ -0,0 +1,9 @@
+Document: telepathy-qt5
+Title: Telepathy-Qt5
+Author: Andre Moreira Magalhaes et al
+Abstract: This manual provides API documentation for Telepathy's Qt 5 bindings.
+Section: Programming/C++
+
+Format: HTML
+Index: /usr/share/doc/libtelepathy-qt5-doc/html/index.html
+Files: /usr/share/doc/libtelepathy-qt5-doc/html/*.html
diff -ruNx .bzr -x debian/ telepathy-qt-0.9.3/debian/libtelepathy-qt5-doc.docs telepathy-qt/debian/libtelepathy-qt5-doc.docs
--- telepathy-qt-0.9.3/debian/libtelepathy-qt5-doc.docs	1970-01-01 01:00:00.000000000 +0100
+++ telepathy-qt/debian/libtelepathy-qt5-doc.docs	2013-02-24 19:22:09.168508000 +0100
@@ -0,0 +1 @@
+doc/html
diff -ruNx .bzr -x debian/ telepathy-qt-0.9.3/debian/libtelepathy-qt5-doc.links telepathy-qt/debian/libtelepathy-qt5-doc.links
--- telepathy-qt-0.9.3/debian/libtelepathy-qt5-doc.links	1970-01-01 01:00:00.000000000 +0100
+++ telepathy-qt/debian/libtelepathy-qt5-doc.links	2013-02-24 19:22:09.168508000 +0100
@@ -0,0 +1 @@
+usr/share/javascript/jquery/jquery.min.js usr/share/doc/libtelepathy-qt5-doc/html/jquery.js
diff -ruNx .bzr -x debian/ telepathy-qt-0.9.3/debian/libtelepathy-qt5-farstream0.install telepathy-qt/debian/libtelepathy-qt5-farstream0.install
--- telepathy-qt-0.9.3/debian/libtelepathy-qt5-farstream0.install	1970-01-01 01:00:00.000000000 +0100
+++ telepathy-qt/debian/libtelepathy-qt5-farstream0.install	2013-02-24 19:22:09.168508000 +0100
@@ -0,0 +1 @@
+usr/lib/*/libtelepathy-qt5-farstream.so.0*
diff -ruNx .bzr -x debian/ telepathy-qt-0.9.3/debian/README.source telepathy-qt/debian/README.source
--- telepathy-qt-0.9.3/debian/README.source	1970-01-01 01:00:00.000000000 +0100
+++ telepathy-qt/debian/README.source	2013-02-24 19:22:09.168508000 +0100
@@ -0,0 +1,36 @@
+Packaging using git
+===================
+
+The repository contains an appropriate debian/gbp.conf to build this package
+using git-buildpackage. The debian branch contains the latest upstream versions
+(for unstable, or experimental while a freeze is in progress). The
+debian-squeeze branch will contain versions targeted for squeeze, etc.
+
+Here's how to build it:
+
+    git clone git://git.debian.org/git/pkg-telepathy/telepathy-qt.git
+    cd telepathy-qt
+    git checkout debian
+    git-buildpackage -us -uc
+
+or for testing/stable branches like debian-squeeze:
+
+    git clone git://git.debian.org/git/pkg-telepathy/telepathy-qt.git
+    cd telepathy-qt
+    git checkout debian-squeeze
+    git-buildpackage -us -uc --git-debian-branch=debian-squeeze
+
+The branch 'upstream' is a copy of the contents of upstream tarballs. To import
+upstream tarballs use:
+
+    git checkout debian
+    git-import-orig ~/telepathy-qt-0.x.y.tar.gz
+
+Patches can be added in the usual 3.0 (quilt) ways, for instance by using
+gbp-pq(1) from the git-buildpackage package.
+
+.symbols files
+==============
+
+Please refer to http://pkg-kde.alioth.debian.org/symbolfiles.html
+for instructions on how to manage symbol files.
diff -ruNx .bzr -x debian/ telepathy-qt-0.9.3/debian/rules telepathy-qt/debian/rules
--- telepathy-qt-0.9.3/debian/rules	1970-01-01 01:00:00.000000000 +0100
+++ telepathy-qt/debian/rules	2013-02-24 19:22:09.168508000 +0100
@@ -0,0 +1,33 @@
+#!/usr/bin/make -f
+
+PATH := /opt/qt5/bin:$(PATH)
+
+include /usr/share/dpkg/architecture.mk
+
+%:
+	dh $@ --parallel
+
+override_dh_auto_configure:
+	dh_auto_configure -- -DDISABLE_WERROR=ON -DHAVE_DOT=YES \
+	                     -DLIB_SUFFIX="/$(DEB_HOST_MULTIARCH)"
+
+ifeq (,$(findstring nodocs,$(DEB_BUILD_OPTIONS)))
+override_dh_auto_build:
+	dh_auto_build --parallel
+	dh_auto_build -- doxygen-doc
+endif
+
+# Do not run tests, as they fall into race conditions sometimes
+override_dh_auto_test:
+
+override_dh_strip:
+	dh_strip --dbg-package=libtelepathy-qt5-dbg
+
+override_dh_install:
+	dh_install --list-missing
+
+# -i is for the doc package, which doesn't depend on the shared library
+override_dh_installdocs:
+	dh_installdocs -a --link-doc=libtelepathy-qt5-0
+	dh_installdocs -i
+	rm -f debian/libtelepathy-qt5-doc/usr/share/doc/libtelepathy-qt5-doc/html/jquery.js
diff -ruNx .bzr -x debian/ telepathy-qt-0.9.3/debian/source/format telepathy-qt/debian/source/format
--- telepathy-qt-0.9.3/debian/source/format	1970-01-01 01:00:00.000000000 +0100
+++ telepathy-qt/debian/source/format	2013-02-24 19:22:09.168508000 +0100
@@ -0,0 +1 @@
+3.0 (native)
diff -ruNx .bzr -x debian/ telepathy-qt-0.9.3/debian/watch telepathy-qt/debian/watch
--- telepathy-qt-0.9.3/debian/watch	1970-01-01 01:00:00.000000000 +0100
+++ telepathy-qt/debian/watch	2013-02-24 19:22:09.168508000 +0100
@@ -0,0 +1,2 @@
+version=3
+http://telepathy.freedesktop.org/releases/telepathy-qt/telepathy-qt-(.*).tar.gz
diff -ruNx .bzr -x debian/ telepathy-qt-0.9.3/examples/accounts/CMakeLists.txt telepathy-qt/examples/accounts/CMakeLists.txt
--- telepathy-qt-0.9.3/examples/accounts/CMakeLists.txt	2012-07-13 19:40:23.000000000 +0200
+++ telepathy-qt/examples/accounts/CMakeLists.txt	2013-02-24 19:22:09.168508000 +0100
@@ -13,11 +13,11 @@
 
 add_executable(accounts ${accounts_SRCS} ${accounts_MOC_SRCS})
 target_link_libraries(accounts
-    ${QT_QTCORE_LIBRARY}
-    ${QT_QTDBUS_LIBRARY}
-    ${QT_QTGUI_LIBRARY}
-    ${QT_QTNETWORK_LIBRARY}
-    ${QT_QTWIDGETS_LIBRARY}
-    ${QT_QTXML_LIBRARY}
-    telepathy-qt${QT_VERSION_MAJOR}
+    ${Qt5Core_LIBRARIES}
+    ${Qt5DBus_LIBRARIES}
+    ${Qt5Gui_LIBRARIES}
+    ${Qt5Network_LIBRARIES}
+    ${Qt5Widgets_LIBRARIES}
+    ${Qt5Xml_LIBRARIES}
+    telepathy-qt${Qt5Core_VERSION_MAJOR}
     ${TP_QT_EXECUTABLE_LINKER_FLAGS})
diff -ruNx .bzr -x debian/ telepathy-qt-0.9.3/examples/cm/CMakeLists.txt telepathy-qt/examples/cm/CMakeLists.txt
--- telepathy-qt-0.9.3/examples/cm/CMakeLists.txt	2012-07-13 19:40:23.000000000 +0200
+++ telepathy-qt/examples/cm/CMakeLists.txt	2013-02-24 19:22:09.168508000 +0100
@@ -11,11 +11,11 @@
 
     add_executable(cm ${cm_SRCS} ${cm_MOC_SRCS})
     target_link_libraries(cm
-        ${QT_QTCORE_LIBRARY}
-        ${QT_QTDBUS_LIBRARY}
-        ${QT_QTNETWORK_LIBRARY}
-        ${QT_QTXML_LIBRARY}
-        telepathy-qt${QT_VERSION_MAJOR}
-        telepathy-qt${QT_VERSION_MAJOR}-service
+        ${Qt5Core_LIBRARIES}
+        ${Qt5DBus_LIBRARIES}
+        ${Qt5Network_LIBRARIES}
+        ${Qt5Xml_LIBRARIES}
+        telepathy-qt${Qt5Core_VERSION_MAJOR}
+        telepathy-qt${Qt5Core_VERSION_MAJOR}-service
         ${TP_QT_EXECUTABLE_LINKER_FLAGS})
 endif(ENABLE_EXPERIMENTAL_SERVICE_SUPPORT)
diff -ruNx .bzr -x debian/ telepathy-qt-0.9.3/examples/contact-messenger/CMakeLists.txt telepathy-qt/examples/contact-messenger/CMakeLists.txt
--- telepathy-qt-0.9.3/examples/contact-messenger/CMakeLists.txt	2012-07-13 19:40:23.000000000 +0200
+++ telepathy-qt/examples/contact-messenger/CMakeLists.txt	2013-02-24 19:22:09.168508000 +0100
@@ -8,9 +8,9 @@
 
 add_executable(messenger-sender ${messenger-sender_SRCS} ${messenger-sender_MOC_SRCS})
 target_link_libraries(messenger-sender
-    ${QT_QTCORE_LIBRARY}
-    ${QT_QTDBUS_LIBRARY}
-    ${QT_QTNETWORK_LIBRARY}
-    ${QT_QTXML_LIBRARY}
-    telepathy-qt${QT_VERSION_MAJOR}
+    ${Qt5Core_LIBRARIES}
+    ${Qt5DBus_LIBRARIES}
+    ${Qt5Network_LIBRARIES}
+    ${Qt5Xml_LIBRARIES}
+    telepathy-qt${Qt5Core_VERSION_MAJOR}
     ${TP_QT_EXECUTABLE_LINKER_FLAGS})
diff -ruNx .bzr -x debian/ telepathy-qt-0.9.3/examples/extensions/CMakeLists.txt telepathy-qt/examples/extensions/CMakeLists.txt
--- telepathy-qt-0.9.3/examples/extensions/CMakeLists.txt	2012-07-13 19:40:23.000000000 +0200
+++ telepathy-qt/examples/extensions/CMakeLists.txt	2013-02-24 19:22:09.168508000 +0100
@@ -71,7 +71,7 @@
 add_library(example_extensions STATIC ${example_extensions_SRCS})
 add_dependencies(example_extensions example-extensions-connection-generation)
 target_link_libraries(example_extensions
-    ${QT_QTDBUS_LIBRARY}
-    ${QT_QTCORE_LIBRARY}
-    telepathy-qt${QT_VERSION_MAJOR}
+    ${Qt5DBus_LIBRARIES}
+    ${Qt5Core_LIBRARIES}
+    telepathy-qt${Qt5Core_VERSION_MAJOR}
     ${TP_QT_LIBRARY_LINKER_FLAGS})
diff -ruNx .bzr -x debian/ telepathy-qt-0.9.3/examples/file-transfer/CMakeLists.txt telepathy-qt/examples/file-transfer/CMakeLists.txt
--- telepathy-qt-0.9.3/examples/file-transfer/CMakeLists.txt	2012-07-13 19:40:23.000000000 +0200
+++ telepathy-qt/examples/file-transfer/CMakeLists.txt	2013-02-24 19:22:09.168508000 +0100
@@ -14,11 +14,11 @@
 
 add_executable(ft-receiver ${ft-receiver_SRCS} ${ft-receiver_MOC_SRCS})
 target_link_libraries(ft-receiver
-    ${QT_QTCORE_LIBRARY}
-    ${QT_QTDBUS_LIBRARY}
-    ${QT_QTNETWORK_LIBRARY}
-    ${QT_QTXML_LIBRARY}
-    telepathy-qt${QT_VERSION_MAJOR}
+    ${Qt5Core_LIBRARIES}
+    ${Qt5DBus_LIBRARIES}
+    ${Qt5Network_LIBRARIES}
+    ${Qt5Xml_LIBRARIES}
+    telepathy-qt${Qt5Core_VERSION_MAJOR}
     ${TP_QT_EXECUTABLE_LINKER_FLAGS})
 
 set(ft-sender_SRCS
@@ -35,9 +35,9 @@
 
 add_executable(ft-sender ${ft-sender_SRCS} ${ft-sender_MOC_SRCS})
 target_link_libraries(ft-sender
-    ${QT_QTCORE_LIBRARY}
-    ${QT_QTDBUS_LIBRARY}
-    ${QT_QTNETWORK_LIBRARY}
-    ${QT_QTXML_LIBRARY}
-    telepathy-qt${QT_VERSION_MAJOR}
+    ${Qt5Core_LIBRARIES}
+    ${Qt5DBus_LIBRARIES}
+    ${Qt5Network_LIBRARIES}
+    ${Qt5Xml_LIBRARIES}
+    telepathy-qt${Qt5Core_VERSION_MAJOR}
     ${TP_QT_EXECUTABLE_LINKER_FLAGS})
diff -ruNx .bzr -x debian/ telepathy-qt-0.9.3/examples/protocols/CMakeLists.txt telepathy-qt/examples/protocols/CMakeLists.txt
--- telepathy-qt-0.9.3/examples/protocols/CMakeLists.txt	2012-07-13 19:40:23.000000000 +0200
+++ telepathy-qt/examples/protocols/CMakeLists.txt	2013-02-24 19:22:09.168508000 +0100
@@ -11,11 +11,11 @@
 
 add_executable(protocols ${protocols_SRCS} ${protocols_MOC_SRCS})
 target_link_libraries(protocols
-    ${QT_QTCORE_LIBRARY}
-    ${QT_QTDBUS_LIBRARY}
-    ${QT_QTGUI_LIBRARY}
-    ${QT_QTNETWORK_LIBRARY}
-    ${QT_QTWIDGETS_LIBRARY}
-    ${QT_QTXML_LIBRARY}
-    telepathy-qt${QT_VERSION_MAJOR}
+    ${Qt5Core_LIBRARIES}
+    ${Qt5DBus_LIBRARIES}
+    ${Qt5Gui_LIBRARIES}
+    ${Qt5Network_LIBRARIES}
+    ${Qt5Widgets_LIBRARIES}
+    ${Qt5Xml_LIBRARIES}
+    telepathy-qt${Qt5Core_VERSION_MAJOR}
     ${TP_QT_EXECUTABLE_LINKER_FLAGS})
diff -ruNx .bzr -x debian/ telepathy-qt-0.9.3/examples/roster/CMakeLists.txt telepathy-qt/examples/roster/CMakeLists.txt
--- telepathy-qt-0.9.3/examples/roster/CMakeLists.txt	2012-07-13 19:40:23.000000000 +0200
+++ telepathy-qt/examples/roster/CMakeLists.txt	2013-02-24 19:22:09.168508000 +0100
@@ -13,13 +13,13 @@
 
 add_executable(roster ${roster_SRCS} ${roster_MOC_SRCS})
 target_link_libraries(roster
-    ${QT_QTCORE_LIBRARY}
-    ${QT_QTDBUS_LIBRARY}
-    ${QT_QTGUI_LIBRARY}
-    ${QT_QTNETWORK_LIBRARY}
-    ${QT_QTWIDGETS_LIBRARY}
-    ${QT_QTXML_LIBRARY}
-    telepathy-qt${QT_VERSION_MAJOR}
+    ${Qt5Core_LIBRARIES}
+    ${Qt5DBus_LIBRARIES}
+    ${Qt5Gui_LIBRARIES}
+    ${Qt5Network_LIBRARIES}
+    ${Qt5Widgets_LIBRARIES}
+    ${Qt5Xml_LIBRARIES}
+    telepathy-qt${Qt5Core_VERSION_MAJOR}
     ${TP_QT_EXECUTABLE_LINKER_FLAGS})
 
 set(telepathy_qt_examples_roster_SRCS
@@ -30,11 +30,11 @@
 
 add_library(telepathy-qt-examples-roster ${telepathy_qt_examples_roster_SRCS})
 target_link_libraries(telepathy-qt-examples-roster
-    ${QT_QTCORE_LIBRARY}
-    ${QT_QTDBUS_LIBRARY}
-    ${QT_QTGUI_LIBRARY}
-    ${QT_QTNETWORK_LIBRARY}
-    ${QT_QTWIDGETS_LIBRARY}
-    ${QT_QTXML_LIBRARY}
-    telepathy-qt${QT_VERSION_MAJOR}
+    ${Qt5Core_LIBRARIES}
+    ${Qt5DBus_LIBRARIES}
+    ${Qt5Gui_LIBRARIES}
+    ${Qt5Network_LIBRARIES}
+    ${Qt5Widgets_LIBRARIES}
+    ${Qt5Xml_LIBRARIES}
+    telepathy-qt${Qt5Core_VERSION_MAJOR}
     ${TP_QT_LIBRARY_LINKER_FLAGS})
diff -ruNx .bzr -x debian/ telepathy-qt-0.9.3/examples/stream-tubes/CMakeLists.txt telepathy-qt/examples/stream-tubes/CMakeLists.txt
--- telepathy-qt-0.9.3/examples/stream-tubes/CMakeLists.txt	2012-07-13 19:40:23.000000000 +0200
+++ telepathy-qt/examples/stream-tubes/CMakeLists.txt	2013-02-24 19:22:09.168508000 +0100
@@ -8,11 +8,11 @@
 
 add_executable(tubereceiver ${tubereceiver_SRCS} ${tubereceiver_MOC_SRCS})
 target_link_libraries(tubereceiver
-    ${QT_QTCORE_LIBRARY}
-    ${QT_QTDBUS_LIBRARY}
-    ${QT_QTNETWORK_LIBRARY}
-    ${QT_QTXML_LIBRARY}
-    telepathy-qt${QT_VERSION_MAJOR}
+    ${Qt5Core_LIBRARIES}
+    ${Qt5DBus_LIBRARIES}
+    ${Qt5Network_LIBRARIES}
+    ${Qt5Xml_LIBRARIES}
+    telepathy-qt${Qt5Core_VERSION_MAJOR}
     ${TP_QT_EXECUTABLE_LINKER_FLAGS})
 
 set(tubeinitiator_SRCS
@@ -25,9 +25,9 @@
 
 add_executable(tubeinitiator ${tubeinitiator_SRCS} ${tubeinitiator_MOC_SRCS})
 target_link_libraries(tubeinitiator
-    ${QT_QTDBUS_LIBRARY}
-    ${QT_QTGUI_LIBRARY}
-    ${QT_QTNETWORK_LIBRARY}
-    ${QT_QTXML_LIBRARY}
-    telepathy-qt${QT_VERSION_MAJOR}
+    ${Qt5DBus_LIBRARIES}
+    ${Qt5Gui_LIBRARIES}
+    ${Qt5Network_LIBRARIES}
+    ${Qt5Xml_LIBRARIES}
+    telepathy-qt${Qt5Core_VERSION_MAJOR}
     ${TP_QT_EXECUTABLE_LINKER_FLAGS})
diff -ruNx .bzr -x debian/ telepathy-qt-0.9.3/.pc/.quilt_patches telepathy-qt/.pc/.quilt_patches
--- telepathy-qt-0.9.3/.pc/.quilt_patches	1970-01-01 01:00:00.000000000 +0100
+++ telepathy-qt/.pc/.quilt_patches	2013-02-24 19:22:09.168508000 +0100
@@ -0,0 +1 @@
+debian/patches
diff -ruNx .bzr -x debian/ telepathy-qt-0.9.3/.pc/.quilt_series telepathy-qt/.pc/.quilt_series
--- telepathy-qt-0.9.3/.pc/.quilt_series	1970-01-01 01:00:00.000000000 +0100
+++ telepathy-qt/.pc/.quilt_series	2013-02-24 19:22:09.168508000 +0100
@@ -0,0 +1 @@
+series
diff -ruNx .bzr -x debian/ telepathy-qt-0.9.3/.pc/.version telepathy-qt/.pc/.version
--- telepathy-qt-0.9.3/.pc/.version	1970-01-01 01:00:00.000000000 +0100
+++ telepathy-qt/.pc/.version	2013-02-24 19:22:09.168508000 +0100
@@ -0,0 +1 @@
+2
diff -ruNx .bzr -x debian/ telepathy-qt-0.9.3/TelepathyQt/account.cpp telepathy-qt/TelepathyQt/account.cpp
--- telepathy-qt-0.9.3/TelepathyQt/account.cpp	2012-07-13 19:40:23.000000000 +0200
+++ telepathy-qt/TelepathyQt/account.cpp	2013-02-24 19:22:09.168508000 +0100
@@ -52,7 +52,7 @@
 #include <QRegExp>
 #include <QSharedPointer>
 #include <QTimer>
-#include <QWeakPointer>
+#include <QPointer>
 
 #include <string.h>
 
@@ -634,7 +634,7 @@
     Client::ChannelDispatcherInterface *iface;
 
     bool introspected, supportsHints;
-    QWeakPointer<PendingVariant> introspectOp;
+    QPointer<PendingVariant> introspectOp;
 
 private:
     DispatcherContext(const DispatcherContext &);
diff -ruNx .bzr -x debian/ telepathy-qt-0.9.3/TelepathyQt/call-content.cpp telepathy-qt/TelepathyQt/call-content.cpp
--- telepathy-qt-0.9.3/TelepathyQt/call-content.cpp	2012-07-13 19:40:23.000000000 +0200
+++ telepathy-qt/TelepathyQt/call-content.cpp	2013-02-24 19:22:09.168508000 +0100
@@ -340,6 +340,7 @@
     mPriv->name = qdbus_cast<QString>(props[QLatin1String("Name")]);
     mPriv->type = qdbus_cast<uint>(props[QLatin1String("Type")]);
     mPriv->disposition = qdbus_cast<uint>(props[QLatin1String("Disposition")]);
+    setInterfaces(qdbus_cast<QStringList>(props[QLatin1String("Interfaces")]));
 
     ObjectPathList streamsPaths = qdbus_cast<ObjectPathList>(props[QLatin1String("Streams")]);
     if (streamsPaths.size() != 0) {
diff -ruNx .bzr -x debian/ telepathy-qt-0.9.3/TelepathyQt/CMakeLists.txt telepathy-qt/TelepathyQt/CMakeLists.txt
--- telepathy-qt-0.9.3/TelepathyQt/CMakeLists.txt	2012-07-13 19:40:23.000000000 +0200
+++ telepathy-qt/TelepathyQt/CMakeLists.txt	2013-02-24 19:22:09.168508000 +0100
@@ -742,9 +742,9 @@
 
 # Create the library
 if (ENABLE_COMPILER_COVERAGE)
-    add_library(telepathy-qt${QT_VERSION_MAJOR} STATIC ${telepathy_qt_SRCS})
+    add_library(telepathy-qt${Qt5Core_VERSION_MAJOR} STATIC ${telepathy_qt_SRCS})
 else (ENABLE_COMPILER_COVERAGE)
-    add_library(telepathy-qt${QT_VERSION_MAJOR} SHARED ${telepathy_qt_SRCS})
+    add_library(telepathy-qt${Qt5Core_VERSION_MAJOR} SHARED ${telepathy_qt_SRCS})
 endif (ENABLE_COMPILER_COVERAGE)
 
 # Library used by tests to test some unexported functionality
@@ -760,58 +760,58 @@
                                      ${telepathy_qt_generated_specs_mocs})
     list(APPEND telepathy_qt_SRCS ${CMAKE_CURRENT_BINARY_DIR}/${generated_file})
     string(REPLACE ".h" ".moc.hpp" moc_src ${moc_src})
-    add_dependencies(telepathy-qt${QT_VERSION_MAJOR} "moc-${moc_src}")
+    add_dependencies(telepathy-qt${Qt5Core_VERSION_MAJOR} "moc-${moc_src}")
 endforeach(moc_src ${telepathy_qt_MOC_SRCS})
 
 # Link
-target_link_libraries(telepathy-qt${QT_VERSION_MAJOR}
-    ${QT_QTCORE_LIBRARY}
-    ${QT_QTDBUS_LIBRARY}
-    ${QT_QTNETWORK_LIBRARY}
-    ${QT_QTXML_LIBRARY}
+target_link_libraries(telepathy-qt${Qt5Core_VERSION_MAJOR}
+    ${Qt5Core_LIBRARIES}
+    ${Qt5DBus_LIBRARIES}
+    ${Qt5Network_LIBRARIES}
+    ${Qt5Xml_LIBRARIES}
     ${TP_QT_LIBRARY_LINKER_FLAGS})
 
 # Link - Library used by tests to test some unexported functionality
 target_link_libraries(telepathy-qt-test-backdoors
-    ${QT_QTCORE_LIBRARY}
-    ${QT_QTDBUS_LIBRARY}
-    ${QT_QTNETWORK_LIBRARY}
-    ${QT_QTXML_LIBRARY}
+    ${Qt5Core_LIBRARIES}
+    ${Qt5DBus_LIBRARIES}
+    ${Qt5Network_LIBRARIES}
+    ${Qt5Xml_LIBRARIES}
     ${TP_QT_LIBRARY_LINKER_FLAGS})
 
 if (ENABLE_COMPILER_COVERAGE)
-    target_link_libraries(telepathy-qt${QT_VERSION_MAJOR} gcov)
+    target_link_libraries(telepathy-qt${Qt5Core_VERSION_MAJOR} gcov)
     target_link_libraries(telepathy-qt-test-backdoors gcov)
 endif (ENABLE_COMPILER_COVERAGE)
 
 # Set the correct version number
-set_target_properties(telepathy-qt${QT_VERSION_MAJOR} PROPERTIES
+set_target_properties(telepathy-qt${Qt5Core_VERSION_MAJOR} PROPERTIES
                                     SOVERSION ${TP_QT_ABI_VERSION}
                                     VERSION ${TP_QT_LIBRARY_VERSION})
 
 
 # Install header files
-install(FILES ${telepathy_qt_HEADERS} DESTINATION ${INCLUDE_INSTALL_DIR}/telepathy-qt${QT_VERSION_MAJOR}/TelepathyQt COMPONENT headers)
-install(FILES ${telepathy_qt_gen_HEADERS} DESTINATION ${INCLUDE_INSTALL_DIR}/telepathy-qt${QT_VERSION_MAJOR}/TelepathyQt/_gen COMPONENT headers)
+install(FILES ${telepathy_qt_HEADERS} DESTINATION ${INCLUDE_INSTALL_DIR}/telepathy-qt${Qt5Core_VERSION_MAJOR}/TelepathyQt COMPONENT headers)
+install(FILES ${telepathy_qt_gen_HEADERS} DESTINATION ${INCLUDE_INSTALL_DIR}/telepathy-qt${Qt5Core_VERSION_MAJOR}/TelepathyQt/_gen COMPONENT headers)
 
 # Install the library - watch out for the correct components
 if (WIN32)
-    install(TARGETS telepathy-qt${QT_VERSION_MAJOR}
-            EXPORT  TelepathyQt${QT_VERSION_MAJOR}Targets
+    install(TARGETS telepathy-qt${Qt5Core_VERSION_MAJOR}
+            EXPORT  TelepathyQt${Qt5Core_VERSION_MAJOR}Targets
             RUNTIME DESTINATION ${LIB_INSTALL_DIR} COMPONENT mainlibrary
             ARCHIVE DESTINATION ${LIB_INSTALL_DIR} COMPONENT libs)
 else (WIN32)
-    install(TARGETS telepathy-qt${QT_VERSION_MAJOR}
-            EXPORT  TelepathyQt${QT_VERSION_MAJOR}Targets
+    install(TARGETS telepathy-qt${Qt5Core_VERSION_MAJOR}
+            EXPORT  TelepathyQt${Qt5Core_VERSION_MAJOR}Targets
             LIBRARY DESTINATION ${LIB_INSTALL_DIR} COMPONENT mainlibrary
             ARCHIVE DESTINATION ${LIB_INSTALL_DIR} COMPONENT libs)
 endif (WIN32)
 
 # pkg-config files, only if we are not using windows
 if (NOT WIN32)
-    configure_file(${CMAKE_CURRENT_SOURCE_DIR}/TelepathyQt.pc.in ${CMAKE_CURRENT_BINARY_DIR}/TelepathyQt${QT_VERSION_MAJOR}.pc)
-    configure_file(${CMAKE_CURRENT_SOURCE_DIR}/TelepathyQt-uninstalled.pc.in ${CMAKE_CURRENT_BINARY_DIR}/TelepathyQt${QT_VERSION_MAJOR}-uninstalled.pc)
-    install(FILES ${CMAKE_CURRENT_BINARY_DIR}/TelepathyQt${QT_VERSION_MAJOR}.pc DESTINATION ${LIB_INSTALL_DIR}/pkgconfig COMPONENT pkgconfig)
+    configure_file(${CMAKE_CURRENT_SOURCE_DIR}/TelepathyQt.pc.in ${CMAKE_CURRENT_BINARY_DIR}/TelepathyQt${Qt5Core_VERSION_MAJOR}.pc)
+    configure_file(${CMAKE_CURRENT_SOURCE_DIR}/TelepathyQt-uninstalled.pc.in ${CMAKE_CURRENT_BINARY_DIR}/TelepathyQt${Qt5Core_VERSION_MAJOR}-uninstalled.pc)
+    install(FILES ${CMAKE_CURRENT_BINARY_DIR}/TelepathyQt${Qt5Core_VERSION_MAJOR}.pc DESTINATION ${LIB_INSTALL_DIR}/pkgconfig COMPONENT pkgconfig)
 endif (NOT WIN32)
 
 # CMake Version and config files
@@ -819,29 +819,29 @@
 
 # all the following variables are put into TelepathyQt*Config.cmake, so
 # they are usable by projects using TelepathyQt.
-make_install_path_absolute(TELEPATHY_QT_INCLUDE_DIR         ${INCLUDE_INSTALL_DIR}/telepathy-qt${QT_VERSION_MAJOR})
+make_install_path_absolute(TELEPATHY_QT_INCLUDE_DIR         ${INCLUDE_INSTALL_DIR}/telepathy-qt${Qt5Core_VERSION_MAJOR})
 make_install_path_absolute(TELEPATHY_QT_LIB_DIR             ${LIB_INSTALL_DIR})
 make_install_path_absolute(TELEPATHY_QT_DATA_DIR            ${DATA_INSTALL_DIR})
 
 # Configure the actual Config file
-configure_file(TelepathyQtConfig.cmake.in "${CMAKE_CURRENT_BINARY_DIR}/TelepathyQt${QT_VERSION_MAJOR}Config.cmake" @ONLY)
+configure_file(TelepathyQtConfig.cmake.in "${CMAKE_CURRENT_BINARY_DIR}/TelepathyQt${Qt5Core_VERSION_MAJOR}Config.cmake" @ONLY)
 
 # this file is used by to check if the installed version can be used.
-macro_write_basic_cmake_version_file(${CMAKE_CURRENT_BINARY_DIR}/TelepathyQt${QT_VERSION_MAJOR}ConfigVersion.cmake
+macro_write_basic_cmake_version_file(${CMAKE_CURRENT_BINARY_DIR}/TelepathyQt${Qt5Core_VERSION_MAJOR}ConfigVersion.cmake
                                      ${PACKAGE_VERSION})
 
 # Find out the correct installation directory
 if (USE_COMMON_CMAKE_PACKAGE_CONFIG_DIR)
-    set(_TelepathyQtConfig_INSTALL_DIR ${LIB_INSTALL_DIR}/cmake/TelepathyQt${QT_VERSION_MAJOR})
+    set(_TelepathyQtConfig_INSTALL_DIR ${LIB_INSTALL_DIR}/cmake/TelepathyQt${Qt5Core_VERSION_MAJOR})
 else (USE_COMMON_CMAKE_PACKAGE_CONFIG_DIR)
-    set(_TelepathyQtConfig_INSTALL_DIR ${LIB_INSTALL_DIR}/TelepathyQt${QT_VERSION_MAJOR}/cmake)
+    set(_TelepathyQtConfig_INSTALL_DIR ${LIB_INSTALL_DIR}/TelepathyQt${Qt5Core_VERSION_MAJOR}/cmake)
 endif (USE_COMMON_CMAKE_PACKAGE_CONFIG_DIR)
 
-install(EXPORT TelepathyQt${QT_VERSION_MAJOR}Targets
+install(EXPORT TelepathyQt${Qt5Core_VERSION_MAJOR}Targets
         DESTINATION ${_TelepathyQtConfig_INSTALL_DIR}
         COMPONENT headers)
-install(FILES ${CMAKE_CURRENT_BINARY_DIR}/TelepathyQt${QT_VERSION_MAJOR}ConfigVersion.cmake
-              ${CMAKE_CURRENT_BINARY_DIR}/TelepathyQt${QT_VERSION_MAJOR}Config.cmake
+install(FILES ${CMAKE_CURRENT_BINARY_DIR}/TelepathyQt${Qt5Core_VERSION_MAJOR}ConfigVersion.cmake
+              ${CMAKE_CURRENT_BINARY_DIR}/TelepathyQt${Qt5Core_VERSION_MAJOR}Config.cmake
         DESTINATION ${_TelepathyQtConfig_INSTALL_DIR}
         COMPONENT headers)
 
@@ -929,12 +929,12 @@
 
     # Create the library
     #if (ENABLE_COMPILER_COVERAGE)
-    #    add_library(telepathy-qt${QT_VERSION_MAJOR}-service STATIC ${telepathy_qt_service_SRCS})
+    #    add_library(telepathy-qt${Qt5Core_VERSION_MAJOR}-service STATIC ${telepathy_qt_service_SRCS})
     #else (ENABLE_COMPILER_COVERAGE)
-    #    add_library(telepathy-qt${QT_VERSION_MAJOR}-service SHARED ${telepathy_qt_service_SRCS})
+    #    add_library(telepathy-qt${Qt5Core_VERSION_MAJOR}-service SHARED ${telepathy_qt_service_SRCS})
     #endif (ENABLE_COMPILER_COVERAGE)
     # lets build a static only library until we have a stable API/ABI
-    add_library(telepathy-qt${QT_VERSION_MAJOR}-service STATIC ${telepathy_qt_service_SRCS})
+    add_library(telepathy-qt${Qt5Core_VERSION_MAJOR}-service STATIC ${telepathy_qt_service_SRCS})
 
     # generate service moc files
     foreach(moc_src ${telepathy_qt_service_MOC_SRCS})
@@ -945,62 +945,62 @@
                                         ${telepathy_qt_service_generated_specs_mocs})
         list(APPEND telepathy_qt_service_SRCS ${CMAKE_CURRENT_BINARY_DIR}/${generated_file})
         string(REPLACE ".h" ".moc.hpp" moc_src ${moc_src})
-        add_dependencies(telepathy-qt${QT_VERSION_MAJOR}-service "moc-${moc_src}")
+        add_dependencies(telepathy-qt${Qt5Core_VERSION_MAJOR}-service "moc-${moc_src}")
     endforeach(moc_src ${telepathy_qt_service_MOC_SRCS})
 
     # Link
-    target_link_libraries(telepathy-qt${QT_VERSION_MAJOR}-service
-        ${QT_QTDBUS_LIBRARY}
-        ${QT_QTCORE_LIBRARY}
-        telepathy-qt${QT_VERSION_MAJOR}
+    target_link_libraries(telepathy-qt${Qt5Core_VERSION_MAJOR}-service
+        ${Qt5DBus_LIBRARIES}
+        ${Qt5Core_LIBRARIES}
+        telepathy-qt${Qt5Core_VERSION_MAJOR}
         ${TP_QT_LIBRARY_LINKER_FLAGS})
 
     # Set the correct version number
-    set_target_properties(telepathy-qt${QT_VERSION_MAJOR}-service PROPERTIES
+    set_target_properties(telepathy-qt${Qt5Core_VERSION_MAJOR}-service PROPERTIES
                                                  SOVERSION ${TP_QT_ABI_VERSION}
                                                  VERSION ${TP_QT_LIBRARY_VERSION})
 
     # Install the library - watch out for the correct components
     if (WIN32)
-        install(TARGETS telepathy-qt${QT_VERSION_MAJOR}-service
-                EXPORT  TelepathyQt${QT_VERSION_MAJOR}Targets
+        install(TARGETS telepathy-qt${Qt5Core_VERSION_MAJOR}-service
+                EXPORT  TelepathyQt${Qt5Core_VERSION_MAJOR}Targets
                 RUNTIME DESTINATION ${LIB_INSTALL_DIR} COMPONENT service
                 ARCHIVE DESTINATION ${LIB_INSTALL_DIR} COMPONENT service_libs)
     else (WIN32)
-        install(TARGETS telepathy-qt${QT_VERSION_MAJOR}-service
-                EXPORT  TelepathyQt${QT_VERSION_MAJOR}Targets
+        install(TARGETS telepathy-qt${Qt5Core_VERSION_MAJOR}-service
+                EXPORT  TelepathyQt${Qt5Core_VERSION_MAJOR}Targets
                 LIBRARY DESTINATION ${LIB_INSTALL_DIR} COMPONENT service
                 ARCHIVE DESTINATION ${LIB_INSTALL_DIR} COMPONENT service_libs)
     endif (WIN32)
 
     # Install headers
-    install(FILES ${telepathy_qt_service_HEADERS} DESTINATION ${INCLUDE_INSTALL_DIR}/telepathy-qt${QT_VERSION_MAJOR}/TelepathyQt
+    install(FILES ${telepathy_qt_service_HEADERS} DESTINATION ${INCLUDE_INSTALL_DIR}/telepathy-qt${Qt5Core_VERSION_MAJOR}/TelepathyQt
             COMPONENT service_headers)
-    install(FILES ${telepathy_qt_service_gen_HEADERS} DESTINATION ${INCLUDE_INSTALL_DIR}/telepathy-qt${QT_VERSION_MAJOR}/TelepathyQt/_gen
+    install(FILES ${telepathy_qt_service_gen_HEADERS} DESTINATION ${INCLUDE_INSTALL_DIR}/telepathy-qt${Qt5Core_VERSION_MAJOR}/TelepathyQt/_gen
             COMPONENT service_headers)
 
     # pkg-config files, only if not on windows
     if (NOT WIN32)
-        configure_file(${CMAKE_CURRENT_SOURCE_DIR}/TelepathyQtService.pc.in ${CMAKE_CURRENT_BINARY_DIR}/TelepathyQt${QT_VERSION_MAJOR}Service.pc)
-        configure_file(${CMAKE_CURRENT_SOURCE_DIR}/TelepathyQtService-uninstalled.pc.in ${CMAKE_CURRENT_BINARY_DIR}/TelepathyQt${QT_VERSION_MAJOR}Service-uninstalled.pc)
-        install(FILES ${CMAKE_CURRENT_BINARY_DIR}/TelepathyQt${QT_VERSION_MAJOR}Service.pc DESTINATION ${LIB_INSTALL_DIR}/pkgconfig COMPONENT pkgconfig)
+        configure_file(${CMAKE_CURRENT_SOURCE_DIR}/TelepathyQtService.pc.in ${CMAKE_CURRENT_BINARY_DIR}/TelepathyQt${Qt5Core_VERSION_MAJOR}Service.pc)
+        configure_file(${CMAKE_CURRENT_SOURCE_DIR}/TelepathyQtService-uninstalled.pc.in ${CMAKE_CURRENT_BINARY_DIR}/TelepathyQt${Qt5Core_VERSION_MAJOR}Service-uninstalled.pc)
+        install(FILES ${CMAKE_CURRENT_BINARY_DIR}/TelepathyQt${Qt5Core_VERSION_MAJOR}Service.pc DESTINATION ${LIB_INSTALL_DIR}/pkgconfig COMPONENT pkgconfig)
     endif (NOT WIN32)
 
     # Configure the actual Config file
-    configure_file(TelepathyQtServiceConfig.cmake.in "${CMAKE_CURRENT_BINARY_DIR}/TelepathyQt${QT_VERSION_MAJOR}ServiceConfig.cmake" @ONLY)
+    configure_file(TelepathyQtServiceConfig.cmake.in "${CMAKE_CURRENT_BINARY_DIR}/TelepathyQt${Qt5Core_VERSION_MAJOR}ServiceConfig.cmake" @ONLY)
 
     # this file is used by to check if the installed version can be used.
-    macro_write_basic_cmake_version_file(${CMAKE_CURRENT_BINARY_DIR}/TelepathyQt${QT_VERSION_MAJOR}ServiceConfigVersion.cmake
+    macro_write_basic_cmake_version_file(${CMAKE_CURRENT_BINARY_DIR}/TelepathyQt${Qt5Core_VERSION_MAJOR}ServiceConfigVersion.cmake
                                          ${PACKAGE_VERSION})
 
     if(USE_COMMON_CMAKE_PACKAGE_CONFIG_DIR)
-        set(_TelepathyQtServiceConfig_INSTALL_DIR ${LIB_INSTALL_DIR}/cmake/TelepathyQt${QT_VERSION_MAJOR}Service)
+        set(_TelepathyQtServiceConfig_INSTALL_DIR ${LIB_INSTALL_DIR}/cmake/TelepathyQt${Qt5Core_VERSION_MAJOR}Service)
     else(USE_COMMON_CMAKE_PACKAGE_CONFIG_DIR)
-        set(_TelepathyQtServiceConfig_INSTALL_DIR ${LIB_INSTALL_DIR}/TelepathyQt${QT_VERSION_MAJOR}Service/cmake)
+        set(_TelepathyQtServiceConfig_INSTALL_DIR ${LIB_INSTALL_DIR}/TelepathyQt${Qt5Core_VERSION_MAJOR}Service/cmake)
     endif(USE_COMMON_CMAKE_PACKAGE_CONFIG_DIR)
 
-    install(FILES ${CMAKE_CURRENT_BINARY_DIR}/TelepathyQt${QT_VERSION_MAJOR}ServiceConfigVersion.cmake
-                  ${CMAKE_CURRENT_BINARY_DIR}/TelepathyQt${QT_VERSION_MAJOR}ServiceConfig.cmake
+    install(FILES ${CMAKE_CURRENT_BINARY_DIR}/TelepathyQt${Qt5Core_VERSION_MAJOR}ServiceConfigVersion.cmake
+                  ${CMAKE_CURRENT_BINARY_DIR}/TelepathyQt${Qt5Core_VERSION_MAJOR}ServiceConfig.cmake
             DESTINATION ${_TelepathyQtServiceConfig_INSTALL_DIR}
             COMPONENT headers)
 
diff -ruNx .bzr -x debian/ telepathy-qt-0.9.3/TelepathyQt/Farsight/channel.cpp telepathy-qt/TelepathyQt/Farsight/channel.cpp
--- telepathy-qt-0.9.3/TelepathyQt/Farsight/channel.cpp	2012-07-13 19:40:23.000000000 +0200
+++ telepathy-qt/TelepathyQt/Farsight/channel.cpp	2013-02-24 19:22:09.168508000 +0100
@@ -63,7 +63,7 @@
     }
 
     TpConnection *gconnection = tp_simple_client_factory_ensure_connection (factory,
-            connection->objectPath().toAscii(), NULL, 0);
+            connection->objectPath().toLatin1(), NULL, 0);
     g_object_unref(factory);
     factory = 0;
     g_object_unref(dbus);
@@ -75,7 +75,7 @@
     }
 
     TpChannel *gchannel = tp_channel_new(gconnection,
-            channel->objectPath().toAscii(),
+            channel->objectPath().toLatin1(),
             TP_QT_IFACE_CHANNEL_TYPE_STREAMED_MEDIA.latin1(),
             (TpHandleType) channel->targetHandleType(),
             channel->targetHandle(),
diff -ruNx .bzr -x debian/ telepathy-qt-0.9.3/TelepathyQt/Farsight/CMakeLists.txt telepathy-qt/TelepathyQt/Farsight/CMakeLists.txt
--- telepathy-qt-0.9.3/TelepathyQt/Farsight/CMakeLists.txt	2012-07-13 19:40:23.000000000 +0200
+++ telepathy-qt/TelepathyQt/Farsight/CMakeLists.txt	2013-02-24 19:22:09.168508000 +0100
@@ -20,63 +20,63 @@
 
     # Create the library
     if (ENABLE_COMPILER_COVERAGE)
-        add_library(telepathy-qt${QT_VERSION_MAJOR}-farsight STATIC ${telepathy_qt_farsight_SRCS})
+        add_library(telepathy-qt${Qt5Core_VERSION_MAJOR}-farsight STATIC ${telepathy_qt_farsight_SRCS})
     else (ENABLE_COMPILER_COVERAGE)
-        add_library(telepathy-qt${QT_VERSION_MAJOR}-farsight SHARED ${telepathy_qt_farsight_SRCS})
+        add_library(telepathy-qt${Qt5Core_VERSION_MAJOR}-farsight SHARED ${telepathy_qt_farsight_SRCS})
     endif (ENABLE_COMPILER_COVERAGE)
     # Link
-    target_link_libraries(telepathy-qt${QT_VERSION_MAJOR}-farsight
-        ${QT_QTDBUS_LIBRARY}
-        ${QT_QTCORE_LIBRARY}
+    target_link_libraries(telepathy-qt${Qt5Core_VERSION_MAJOR}-farsight
+        ${Qt5DBus_LIBRARIES}
+        ${Qt5Core_LIBRARIES}
         ${TELEPATHY_FARSIGHT_LIBRARIES}
         ${GSTREAMER_INTERFACE_LIBRARY}
-        telepathy-qt${QT_VERSION_MAJOR}
+        telepathy-qt${Qt5Core_VERSION_MAJOR}
         ${TP_QT_LIBRARY_LINKER_FLAGS})
 
     # Set the correct version number
-    set_target_properties(telepathy-qt${QT_VERSION_MAJOR}-farsight PROPERTIES
+    set_target_properties(telepathy-qt${Qt5Core_VERSION_MAJOR}-farsight PROPERTIES
                                                  SOVERSION ${TP_QT_ABI_VERSION}
                                                  VERSION ${TP_QT_LIBRARY_VERSION})
 
     # Install the library - watch out for the correct components
     if (WIN32)
-        install(TARGETS telepathy-qt${QT_VERSION_MAJOR}-farsight
-                EXPORT  TelepathyQt${QT_VERSION_MAJOR}Targets
+        install(TARGETS telepathy-qt${Qt5Core_VERSION_MAJOR}-farsight
+                EXPORT  TelepathyQt${Qt5Core_VERSION_MAJOR}Targets
                 RUNTIME DESTINATION ${LIB_INSTALL_DIR} COMPONENT farsight
                 ARCHIVE DESTINATION ${LIB_INSTALL_DIR} COMPONENT farsight_libs)
     else (WIN32)
-        install(TARGETS telepathy-qt${QT_VERSION_MAJOR}-farsight
-                EXPORT  TelepathyQt${QT_VERSION_MAJOR}Targets
+        install(TARGETS telepathy-qt${Qt5Core_VERSION_MAJOR}-farsight
+                EXPORT  TelepathyQt${Qt5Core_VERSION_MAJOR}Targets
                 LIBRARY DESTINATION ${LIB_INSTALL_DIR} COMPONENT farsight
                 ARCHIVE DESTINATION ${LIB_INSTALL_DIR} COMPONENT farsight_libs)
     endif (WIN32)
 
     # Install headers
-    install(FILES ${telepathy_qt_farsight_HEADERS} DESTINATION ${INCLUDE_INSTALL_DIR}/telepathy-qt${QT_VERSION_MAJOR}/TelepathyQt/Farsight
+    install(FILES ${telepathy_qt_farsight_HEADERS} DESTINATION ${INCLUDE_INSTALL_DIR}/telepathy-qt${Qt5Core_VERSION_MAJOR}/TelepathyQt/Farsight
             COMPONENT farsight_headers)
 
     # pkg-config files, only if not on windows
     if (NOT WIN32)
-        configure_file(${CMAKE_CURRENT_SOURCE_DIR}/TelepathyQtFarsight.pc.in ${CMAKE_CURRENT_BINARY_DIR}/TelepathyQt${QT_VERSION_MAJOR}Farsight.pc)
-        configure_file(${CMAKE_CURRENT_SOURCE_DIR}/TelepathyQtFarsight-uninstalled.pc.in ${CMAKE_CURRENT_BINARY_DIR}/TelepathyQt${QT_VERSION_MAJOR}Farsight-uninstalled.pc)
-        install(FILES ${CMAKE_CURRENT_BINARY_DIR}/TelepathyQt${QT_VERSION_MAJOR}Farsight.pc DESTINATION ${LIB_INSTALL_DIR}/pkgconfig COMPONENT pkgconfig)
+        configure_file(${CMAKE_CURRENT_SOURCE_DIR}/TelepathyQtFarsight.pc.in ${CMAKE_CURRENT_BINARY_DIR}/TelepathyQt${Qt5Core_VERSION_MAJOR}Farsight.pc)
+        configure_file(${CMAKE_CURRENT_SOURCE_DIR}/TelepathyQtFarsight-uninstalled.pc.in ${CMAKE_CURRENT_BINARY_DIR}/TelepathyQt${Qt5Core_VERSION_MAJOR}Farsight-uninstalled.pc)
+        install(FILES ${CMAKE_CURRENT_BINARY_DIR}/TelepathyQt${Qt5Core_VERSION_MAJOR}Farsight.pc DESTINATION ${LIB_INSTALL_DIR}/pkgconfig COMPONENT pkgconfig)
     endif (NOT WIN32)
 
     # Configure the actual Config file
-    configure_file(TelepathyQtFarsightConfig.cmake.in "${CMAKE_CURRENT_BINARY_DIR}/TelepathyQt${QT_VERSION_MAJOR}FarsightConfig.cmake" @ONLY)
+    configure_file(TelepathyQtFarsightConfig.cmake.in "${CMAKE_CURRENT_BINARY_DIR}/TelepathyQt${Qt5Core_VERSION_MAJOR}FarsightConfig.cmake" @ONLY)
 
     # this file is used by to check if the installed version can be used.
-    macro_write_basic_cmake_version_file(${CMAKE_CURRENT_BINARY_DIR}/TelepathyQt${QT_VERSION_MAJOR}FarsightConfigVersion.cmake
+    macro_write_basic_cmake_version_file(${CMAKE_CURRENT_BINARY_DIR}/TelepathyQt${Qt5Core_VERSION_MAJOR}FarsightConfigVersion.cmake
                                          ${PACKAGE_VERSION})
 
     if(USE_COMMON_CMAKE_PACKAGE_CONFIG_DIR)
-        set(_TelepathyQtFarsightConfig_INSTALL_DIR ${LIB_INSTALL_DIR}/cmake/TelepathyQt${QT_VERSION_MAJOR}Farsight)
+        set(_TelepathyQtFarsightConfig_INSTALL_DIR ${LIB_INSTALL_DIR}/cmake/TelepathyQt${Qt5Core_VERSION_MAJOR}Farsight)
     else(USE_COMMON_CMAKE_PACKAGE_CONFIG_DIR)
-        set(_TelepathyQtFarsightConfig_INSTALL_DIR ${LIB_INSTALL_DIR}/TelepathyQt${QT_VERSION_MAJOR}Farsight/cmake)
+        set(_TelepathyQtFarsightConfig_INSTALL_DIR ${LIB_INSTALL_DIR}/TelepathyQt${Qt5Core_VERSION_MAJOR}Farsight/cmake)
     endif(USE_COMMON_CMAKE_PACKAGE_CONFIG_DIR)
 
-    install(FILES ${CMAKE_CURRENT_BINARY_DIR}/TelepathyQt${QT_VERSION_MAJOR}FarsightConfigVersion.cmake
-                  ${CMAKE_CURRENT_BINARY_DIR}/TelepathyQt${QT_VERSION_MAJOR}FarsightConfig.cmake
+    install(FILES ${CMAKE_CURRENT_BINARY_DIR}/TelepathyQt${Qt5Core_VERSION_MAJOR}FarsightConfigVersion.cmake
+                  ${CMAKE_CURRENT_BINARY_DIR}/TelepathyQt${Qt5Core_VERSION_MAJOR}FarsightConfig.cmake
             DESTINATION ${_TelepathyQtFarsightConfig_INSTALL_DIR}
             COMPONENT headers)
 
diff -ruNx .bzr -x debian/ telepathy-qt-0.9.3/TelepathyQt/Farsight/TelepathyQtFarsightConfig.cmake.in telepathy-qt/TelepathyQt/Farsight/TelepathyQtFarsightConfig.cmake.in
--- telepathy-qt-0.9.3/TelepathyQt/Farsight/TelepathyQtFarsightConfig.cmake.in	2012-07-13 19:40:23.000000000 +0200
+++ telepathy-qt/TelepathyQt/Farsight/TelepathyQtFarsightConfig.cmake.in	2013-02-24 19:22:09.168508000 +0100
@@ -1,24 +1,24 @@
-# TelepathyQt@QT_VERSION_MAJOR@FarsightConfig.cmake is generated by CMake from TelepathyQt/TelepathyQtFarsightConfig.cmake.in.
+# TelepathyQt@Qt5Core_VERSION_MAJOR@FarsightConfig.cmake is generated by CMake from TelepathyQt/TelepathyQtFarsightConfig.cmake.in.
 # Any changed value in this file will be overwritten by CMake.
 
-if(NOT TelepathyQt@QT_VERSION_MAJOR@Farsight_FOUND)
+if(NOT TelepathyQt@Qt5Core_VERSION_MAJOR@Farsight_FOUND)
     # set the version number
-    set(TELEPATHY_QT@QT_VERSION_MAJOR@_FARSIGHT_VERSION_MAJOR @TP_QT_MAJOR_VERSION@)
-    set(TELEPATHY_QT@QT_VERSION_MAJOR@_FARSIGHT_VERSION_MINOR @TP_QT_MINOR_VERSION@)
-    set(TELEPATHY_QT@QT_VERSION_MAJOR@_FARSIGHT_VERSION_MICRO @TP_QT_MICRO_VERSION@)
-    set(TELEPATHY_QT@QT_VERSION_MAJOR@_FARSIGHT_VERSION_NANO @TP_QT_NANO_VERSION@)
-    set(TELEPATHY_QT@QT_VERSION_MAJOR@_FARSIGHT_VERSION @PACKAGE_VERSION@)
+    set(TELEPATHY_QT@Qt5Core_VERSION_MAJOR@_FARSIGHT_VERSION_MAJOR @TP_QT_MAJOR_VERSION@)
+    set(TELEPATHY_QT@Qt5Core_VERSION_MAJOR@_FARSIGHT_VERSION_MINOR @TP_QT_MINOR_VERSION@)
+    set(TELEPATHY_QT@Qt5Core_VERSION_MAJOR@_FARSIGHT_VERSION_MICRO @TP_QT_MICRO_VERSION@)
+    set(TELEPATHY_QT@Qt5Core_VERSION_MAJOR@_FARSIGHT_VERSION_NANO @TP_QT_NANO_VERSION@)
+    set(TELEPATHY_QT@Qt5Core_VERSION_MAJOR@_FARSIGHT_VERSION @PACKAGE_VERSION@)
 
     # set the directories
-    if(NOT TELEPATHY_QT@QT_VERSION_MAJOR@_FARSIGHT_INSTALL_DIR)
-    set(TELEPATHY_QT@QT_VERSION_MAJOR@_FARSIGHT_INSTALL_DIR "@CMAKE_INSTALL_PREFIX@")
-    endif(NOT TELEPATHY_QT@QT_VERSION_MAJOR@_FARSIGHT_INSTALL_DIR)
+    if(NOT TELEPATHY_QT@Qt5Core_VERSION_MAJOR@_FARSIGHT_INSTALL_DIR)
+    set(TELEPATHY_QT@Qt5Core_VERSION_MAJOR@_FARSIGHT_INSTALL_DIR "@CMAKE_INSTALL_PREFIX@")
+    endif(NOT TELEPATHY_QT@Qt5Core_VERSION_MAJOR@_FARSIGHT_INSTALL_DIR)
 
-    set(TELEPATHY_QT@QT_VERSION_MAJOR@_FARSIGHT_INCLUDE_DIR              "@TELEPATHY_QT_INCLUDE_DIR@")
-    set(TELEPATHY_QT@QT_VERSION_MAJOR@_FARSIGHT_LIB_DIR                  "@TELEPATHY_QT_LIB_DIR@")
-    set(TELEPATHY_QT@QT_VERSION_MAJOR@_FARSIGHT_SHARE_DIR                "@TELEPATHY_QT_DATA_DIR@")
+    set(TELEPATHY_QT@Qt5Core_VERSION_MAJOR@_FARSIGHT_INCLUDE_DIR              "@TELEPATHY_QT_INCLUDE_DIR@")
+    set(TELEPATHY_QT@Qt5Core_VERSION_MAJOR@_FARSIGHT_LIB_DIR                  "@TELEPATHY_QT_LIB_DIR@")
+    set(TELEPATHY_QT@Qt5Core_VERSION_MAJOR@_FARSIGHT_SHARE_DIR                "@TELEPATHY_QT_DATA_DIR@")
 
-    find_package(TelepathyQt@QT_VERSION_MAJOR@ REQUIRED)
+    find_package(TelepathyQt@Qt5Core_VERSION_MAJOR@ REQUIRED)
 
-    set(TELEPATHY_QT@QT_VERSION_MAJOR@_FARSIGHT_LIBRARIES telepathy-qt@QT_VERSION_MAJOR@-farsight)
-endif(NOT TelepathyQt@QT_VERSION_MAJOR@Farsight_FOUND)
+    set(TELEPATHY_QT@Qt5Core_VERSION_MAJOR@_FARSIGHT_LIBRARIES telepathy-qt@Qt5Core_VERSION_MAJOR@-farsight)
+endif(NOT TelepathyQt@Qt5Core_VERSION_MAJOR@Farsight_FOUND)
diff -ruNx .bzr -x debian/ telepathy-qt-0.9.3/TelepathyQt/Farsight/TelepathyQtFarsight.pc.in telepathy-qt/TelepathyQt/Farsight/TelepathyQtFarsight.pc.in
--- telepathy-qt-0.9.3/TelepathyQt/Farsight/TelepathyQtFarsight.pc.in	2012-07-13 19:40:23.000000000 +0200
+++ telepathy-qt/TelepathyQt/Farsight/TelepathyQtFarsight.pc.in	2013-02-24 19:22:09.168508000 +0100
@@ -3,9 +3,9 @@
 libdir=${CMAKE_INSTALL_PREFIX}/${LIB_INSTALL_DIR}
 includedir=${CMAKE_INSTALL_PREFIX}/${INCLUDE_INSTALL_DIR}
 
-Name: TelepathyQt${QT_VERSION_MAJOR}Farsight
+Name: TelepathyQt${Qt5Core_VERSION_MAJOR}Farsight
 Description: Qt Telepathy Farsight utility library for the Telepathy framework
 Version: ${PACKAGE_VERSION}
-Requires.private: QtCore >= ${QT_MIN_VERSION}, QtCore < ${QT_MAX_VERSION}, QtDBus >= ${QT_MIN_VERSION}, QtDBus < ${QT_MAX_VERSION}, telepathy-glib >= ${TELEPATHY_GLIB_MIN_VERSION}, telepathy-farsight >= ${TELEPATHY_FARSIGHT_MIN_VERSION}, TelepathyQt${QT_VERSION_MAJOR} = ${PACKAGE_VERSION}
-Libs: -L${CMAKE_INSTALL_PREFIX}/${LIB_INSTALL_DIR} -ltelepathy-qt${QT_VERSION_MAJOR}-farsight
-Cflags: -I${CMAKE_INSTALL_PREFIX}/${INCLUDE_INSTALL_DIR}/telepathy-qt${QT_VERSION_MAJOR}
+Requires.private: Qt5Core >= ${QT_MIN_VERSION}, Qt5Core < ${QT_MAX_VERSION}, Qt5DBus >= ${QT_MIN_VERSION}, Qt5DBus < ${QT_MAX_VERSION}, telepathy-glib >= ${TELEPATHY_GLIB_MIN_VERSION}, telepathy-farsight >= ${TELEPATHY_FARSIGHT_MIN_VERSION}, TelepathyQt${Qt5Core_VERSION_MAJOR} = ${PACKAGE_VERSION}
+Libs: -L${CMAKE_INSTALL_PREFIX}/${LIB_INSTALL_DIR} -ltelepathy-qt${Qt5Core_VERSION_MAJOR}-farsight
+Cflags: -I${CMAKE_INSTALL_PREFIX}/${INCLUDE_INSTALL_DIR}/telepathy-qt${Qt5Core_VERSION_MAJOR}
diff -ruNx .bzr -x debian/ telepathy-qt-0.9.3/TelepathyQt/Farsight/TelepathyQtFarsight-uninstalled.pc.in telepathy-qt/TelepathyQt/Farsight/TelepathyQtFarsight-uninstalled.pc.in
--- telepathy-qt-0.9.3/TelepathyQt/Farsight/TelepathyQtFarsight-uninstalled.pc.in	2012-07-13 19:40:23.000000000 +0200
+++ telepathy-qt/TelepathyQt/Farsight/TelepathyQtFarsight-uninstalled.pc.in	2013-02-24 19:22:09.168508000 +0100
@@ -3,9 +3,9 @@
 abs_top_builddir=${CMAKE_BINARY_DIR}
 abs_top_srcdir=${CMAKE_SOURCE_DIR}
 
-Name: TelepathyQt${QT_VERSION_MAJOR}Farsight (uninstalled copy)
+Name: TelepathyQt${Qt5Core_VERSION_MAJOR}Farsight (uninstalled copy)
 Description: Qt Telepathy Farsight utility library for the Telepathy framework
 Version: ${PACKAGE_VERSION}
-Requires.private: QtCore >= ${QT_MIN_VERSION}, QtCore < ${QT_MAX_VERSION}, QtDBus >= ${QT_MIN_VERSION}, QtDBus < ${QT_MAX_VERSION}, telepathy-glib >= ${TELEPATHY_GLIB_MIN_VERSION}, telepathy-farsight >= ${TELEPATHY_FARSIGHT_MIN_VERSION}, TelepathyQt${QT_VERSION_MAJOR} = ${PACKAGE_VERSION}
-Libs: ${CMAKE_BINARY_DIR}/TelepathyQt/Farsight/libtelepathy-qt${QT_VERSION_MAJOR}-farsight.so
+Requires.private: Qt5Core >= ${QT_MIN_VERSION}, Qt5Core < ${QT_MAX_VERSION}, Qt5DBus >= ${QT_MIN_VERSION}, Qt5DBus < ${QT_MAX_VERSION}, telepathy-glib >= ${TELEPATHY_GLIB_MIN_VERSION}, telepathy-farsight >= ${TELEPATHY_FARSIGHT_MIN_VERSION}, TelepathyQt${Qt5Core_VERSION_MAJOR} = ${PACKAGE_VERSION}
+Libs: ${CMAKE_BINARY_DIR}/TelepathyQt/Farsight/libtelepathy-qt${Qt5Core_VERSION_MAJOR}-farsight.so
 Cflags: -I${CMAKE_SOURCE_DIR} -I${CMAKE_BINARY_DIR}
diff -ruNx .bzr -x debian/ telepathy-qt-0.9.3/TelepathyQt/Farstream/channel.cpp telepathy-qt/TelepathyQt/Farstream/channel.cpp
--- telepathy-qt-0.9.3/TelepathyQt/Farstream/channel.cpp	2012-07-13 19:40:23.000000000 +0200
+++ telepathy-qt/TelepathyQt/Farstream/channel.cpp	2013-02-24 19:22:09.168508000 +0100
@@ -90,7 +90,7 @@
     }
 
     TpConnection *gconnection = tp_simple_client_factory_ensure_connection (factory,
-            connection->objectPath().toAscii(), NULL, 0);
+            connection->objectPath().toLatin1(), NULL, 0);
     if (!gconnection) {
         warning() << "Unable to construct TpConnection";
         setFinishedWithError(TP_QT_ERROR_NOT_AVAILABLE,
@@ -101,10 +101,10 @@
     }
 
     TpChannel *gchannel = (TpChannel*) g_object_new(TP_TYPE_CALL_CHANNEL,
-            "bus-name", connection->busName().toAscii().constData(),
+            "bus-name", connection->busName().toLatin1().constData(),
             "connection", gconnection,
             "dbus-daemon", dbus,
-            "object-path", channel->objectPath().toAscii().constData(),
+            "object-path", channel->objectPath().toLatin1().constData(),
             NULL);
     g_object_unref(factory);
     factory = 0;
diff -ruNx .bzr -x debian/ telepathy-qt-0.9.3/TelepathyQt/Farstream/CMakeLists.txt telepathy-qt/TelepathyQt/Farstream/CMakeLists.txt
--- telepathy-qt-0.9.3/TelepathyQt/Farstream/CMakeLists.txt	2012-07-13 19:40:23.000000000 +0200
+++ telepathy-qt/TelepathyQt/Farstream/CMakeLists.txt	2013-02-24 19:22:09.168508000 +0100
@@ -30,75 +30,75 @@
 
     # Create the library
     if (ENABLE_COMPILER_COVERAGE)
-        add_library(telepathy-qt${QT_VERSION_MAJOR}-farstream STATIC
+        add_library(telepathy-qt${Qt5Core_VERSION_MAJOR}-farstream STATIC
                     ${telepathy_qt_farstream_SRCS} ${telepathy_qt_farstream_MOC_SRCS})
     else (ENABLE_COMPILER_COVERAGE)
-        add_library(telepathy-qt${QT_VERSION_MAJOR}-farstream SHARED
+        add_library(telepathy-qt${Qt5Core_VERSION_MAJOR}-farstream SHARED
                     ${telepathy_qt_farstream_SRCS} ${telepathy_qt_farstream_MOC_SRCS})
     endif (ENABLE_COMPILER_COVERAGE)
 
     # Link
-    target_link_libraries(telepathy-qt${QT_VERSION_MAJOR}-farstream
-        ${QT_QTDBUS_LIBRARY}
-        ${QT_QTCORE_LIBRARY}
+    target_link_libraries(telepathy-qt${Qt5Core_VERSION_MAJOR}-farstream
+        ${Qt5DBus_LIBRARIES}
+        ${Qt5Core_LIBRARIES}
         ${TELEPATHY_FARSTREAM_LIBRARIES}
         ${TELEPATHY_GLIB_LIBRARIES}
-        telepathy-qt${QT_VERSION_MAJOR}
+        telepathy-qt${Qt5Core_VERSION_MAJOR}
         ${TP_QT_LIBRARY_LINKER_FLAGS})
 
     if (ENABLE_COMPILER_COVERAGE)
-        target_link_libraries(telepathy-qt${QT_VERSION_MAJOR}-farstream gcov)
+        target_link_libraries(telepathy-qt${Qt5Core_VERSION_MAJOR}-farstream gcov)
     endif (ENABLE_COMPILER_COVERAGE)
 
     # Set the correct version number
-    set_target_properties(telepathy-qt${QT_VERSION_MAJOR}-farstream PROPERTIES
+    set_target_properties(telepathy-qt${Qt5Core_VERSION_MAJOR}-farstream PROPERTIES
                                                        SOVERSION ${TP_QT_ABI_VERSION}
                                                        VERSION ${TP_QT_LIBRARY_VERSION})
 
     # Install the library - watch out for the correct components
     if (WIN32)
-        install(TARGETS telepathy-qt${QT_VERSION_MAJOR}-farstream
-                EXPORT TelepathyQt${QT_VERSION_MAJOR}Targets
+        install(TARGETS telepathy-qt${Qt5Core_VERSION_MAJOR}-farstream
+                EXPORT TelepathyQt${Qt5Core_VERSION_MAJOR}Targets
                 RUNTIME DESTINATION ${LIB_INSTALL_DIR} COMPONENT farstream
                 ARCHIVE DESTINATION ${LIB_INSTALL_DIR} COMPONENT farstream_libs)
     else (WIN32)
-        install(TARGETS telepathy-qt${QT_VERSION_MAJOR}-farstream
-                EXPORT TelepathyQt${QT_VERSION_MAJOR}Targets
+        install(TARGETS telepathy-qt${Qt5Core_VERSION_MAJOR}-farstream
+                EXPORT TelepathyQt${Qt5Core_VERSION_MAJOR}Targets
                 LIBRARY DESTINATION ${LIB_INSTALL_DIR} COMPONENT farstream
                 ARCHIVE DESTINATION ${LIB_INSTALL_DIR} COMPONENT farstream_libs)
     endif (WIN32)
 
     # Install headers
     install(FILES ${telepathy_qt_farstream_HEADERS}
-            DESTINATION ${INCLUDE_INSTALL_DIR}/telepathy-qt${QT_VERSION_MAJOR}/TelepathyQt/Farstream
+            DESTINATION ${INCLUDE_INSTALL_DIR}/telepathy-qt${Qt5Core_VERSION_MAJOR}/TelepathyQt/Farstream
             COMPONENT farstream_headers)
 
     # pkg-config files, only if not on windows
     if (NOT WIN32)
         configure_file(${CMAKE_CURRENT_SOURCE_DIR}/TelepathyQtFarstream.pc.in
-                       ${CMAKE_CURRENT_BINARY_DIR}/TelepathyQt${QT_VERSION_MAJOR}Farstream.pc)
+                       ${CMAKE_CURRENT_BINARY_DIR}/TelepathyQt${Qt5Core_VERSION_MAJOR}Farstream.pc)
         configure_file(${CMAKE_CURRENT_SOURCE_DIR}/TelepathyQtFarstream-uninstalled.pc.in
-                       ${CMAKE_CURRENT_BINARY_DIR}/TelepathyQt${QT_VERSION_MAJOR}Farstream-uninstalled.pc)
-        install(FILES ${CMAKE_CURRENT_BINARY_DIR}/TelepathyQt${QT_VERSION_MAJOR}Farstream.pc
+                       ${CMAKE_CURRENT_BINARY_DIR}/TelepathyQt${Qt5Core_VERSION_MAJOR}Farstream-uninstalled.pc)
+        install(FILES ${CMAKE_CURRENT_BINARY_DIR}/TelepathyQt${Qt5Core_VERSION_MAJOR}Farstream.pc
                 DESTINATION ${LIB_INSTALL_DIR}/pkgconfig COMPONENT pkgconfig)
     endif (NOT WIN32)
 
     # Configure the actual Config file
     configure_file(TelepathyQtFarstreamConfig.cmake.in
-                   "${CMAKE_CURRENT_BINARY_DIR}/TelepathyQt${QT_VERSION_MAJOR}FarstreamConfig.cmake" @ONLY)
+                   "${CMAKE_CURRENT_BINARY_DIR}/TelepathyQt${Qt5Core_VERSION_MAJOR}FarstreamConfig.cmake" @ONLY)
 
     # this file is used by to check if the installed version can be used.
-    macro_write_basic_cmake_version_file(${CMAKE_CURRENT_BINARY_DIR}/TelepathyQt${QT_VERSION_MAJOR}FarstreamConfigVersion.cmake
+    macro_write_basic_cmake_version_file(${CMAKE_CURRENT_BINARY_DIR}/TelepathyQt${Qt5Core_VERSION_MAJOR}FarstreamConfigVersion.cmake
                                          ${PACKAGE_VERSION})
 
     if(USE_COMMON_CMAKE_PACKAGE_CONFIG_DIR)
-        set(_TelepathyQtFarstreamConfig_INSTALL_DIR ${LIB_INSTALL_DIR}/cmake/TelepathyQt${QT_VERSION_MAJOR}Farstream)
+        set(_TelepathyQtFarstreamConfig_INSTALL_DIR ${LIB_INSTALL_DIR}/cmake/TelepathyQt${Qt5Core_VERSION_MAJOR}Farstream)
     else(USE_COMMON_CMAKE_PACKAGE_CONFIG_DIR)
-        set(_TelepathyQtFarstreamConfig_INSTALL_DIR ${LIB_INSTALL_DIR}/TelepathyQt${QT_VERSION_MAJOR}Farstream/cmake)
+        set(_TelepathyQtFarstreamConfig_INSTALL_DIR ${LIB_INSTALL_DIR}/TelepathyQt${Qt5Core_VERSION_MAJOR}Farstream/cmake)
     endif(USE_COMMON_CMAKE_PACKAGE_CONFIG_DIR)
 
-    install(FILES ${CMAKE_CURRENT_BINARY_DIR}/TelepathyQt${QT_VERSION_MAJOR}FarstreamConfigVersion.cmake
-                  ${CMAKE_CURRENT_BINARY_DIR}/TelepathyQt${QT_VERSION_MAJOR}FarstreamConfig.cmake
+    install(FILES ${CMAKE_CURRENT_BINARY_DIR}/TelepathyQt${Qt5Core_VERSION_MAJOR}FarstreamConfigVersion.cmake
+                  ${CMAKE_CURRENT_BINARY_DIR}/TelepathyQt${Qt5Core_VERSION_MAJOR}FarstreamConfig.cmake
             DESTINATION ${_TelepathyQtFarstreamConfig_INSTALL_DIR}
             COMPONENT headers)
 
diff -ruNx .bzr -x debian/ telepathy-qt-0.9.3/TelepathyQt/Farstream/TelepathyQtFarstreamConfig.cmake.in telepathy-qt/TelepathyQt/Farstream/TelepathyQtFarstreamConfig.cmake.in
--- telepathy-qt-0.9.3/TelepathyQt/Farstream/TelepathyQtFarstreamConfig.cmake.in	2012-07-13 19:40:23.000000000 +0200
+++ telepathy-qt/TelepathyQt/Farstream/TelepathyQtFarstreamConfig.cmake.in	2013-02-24 19:22:09.168508000 +0100
@@ -1,24 +1,24 @@
-# TelepathyQt@QT_VERSION_MAJOR@FarstreamConfig.cmake is generated by CMake from TelepathyQt/TelepathyQtFarstreamConfig.cmake.in.
+# TelepathyQt@Qt5Core_VERSION_MAJOR@FarstreamConfig.cmake is generated by CMake from TelepathyQt/TelepathyQtFarstreamConfig.cmake.in.
 # Any changed value in this file will be overwritten by CMake.
 
-if(NOT TelepathyQt@QT_VERSION_MAJOR@Farstream_FOUND)
+if(NOT TelepathyQt@Qt5Core_VERSION_MAJOR@Farstream_FOUND)
     # set the version number
-    set(TELEPATHY_QT@QT_VERSION_MAJOR@_FARSTREAM_VERSION_MAJOR @TP_QT_MAJOR_VERSION@)
-    set(TELEPATHY_QT@QT_VERSION_MAJOR@_FARSTREAM_VERSION_MINOR @TP_QT_MINOR_VERSION@)
-    set(TELEPATHY_QT@QT_VERSION_MAJOR@_FARSTREAM_VERSION_MICRO @TP_QT_MICRO_VERSION@)
-    set(TELEPATHY_QT@QT_VERSION_MAJOR@_FARSTREAM_VERSION_NANO @TP_QT_NANO_VERSION@)
-    set(TELEPATHY_QT@QT_VERSION_MAJOR@_FARSTREAM_VERSION @PACKAGE_VERSION@)
+    set(TELEPATHY_QT@Qt5Core_VERSION_MAJOR@_FARSTREAM_VERSION_MAJOR @TP_QT_MAJOR_VERSION@)
+    set(TELEPATHY_QT@Qt5Core_VERSION_MAJOR@_FARSTREAM_VERSION_MINOR @TP_QT_MINOR_VERSION@)
+    set(TELEPATHY_QT@Qt5Core_VERSION_MAJOR@_FARSTREAM_VERSION_MICRO @TP_QT_MICRO_VERSION@)
+    set(TELEPATHY_QT@Qt5Core_VERSION_MAJOR@_FARSTREAM_VERSION_NANO @TP_QT_NANO_VERSION@)
+    set(TELEPATHY_QT@Qt5Core_VERSION_MAJOR@_FARSTREAM_VERSION @PACKAGE_VERSION@)
 
     # set the directories
-    if(NOT TELEPATHY_QT@QT_VERSION_MAJOR@_FARSTREAM_INSTALL_DIR)
-    set(TELEPATHY_QT@QT_VERSION_MAJOR@_FARSTREAM_INSTALL_DIR "@CMAKE_INSTALL_PREFIX@")
-    endif(NOT TELEPATHY_QT@QT_VERSION_MAJOR@_FARSTREAM_INSTALL_DIR)
+    if(NOT TELEPATHY_QT@Qt5Core_VERSION_MAJOR@_FARSTREAM_INSTALL_DIR)
+    set(TELEPATHY_QT@Qt5Core_VERSION_MAJOR@_FARSTREAM_INSTALL_DIR "@CMAKE_INSTALL_PREFIX@")
+    endif(NOT TELEPATHY_QT@Qt5Core_VERSION_MAJOR@_FARSTREAM_INSTALL_DIR)
 
-    set(TELEPATHY_QT@QT_VERSION_MAJOR@_FARSTREAM_INCLUDE_DIR              "@TELEPATHY_QT_INCLUDE_DIR@")
-    set(TELEPATHY_QT@QT_VERSION_MAJOR@_FARSTREAM_LIB_DIR                  "@TELEPATHY_QT_LIB_DIR@")
-    set(TELEPATHY_QT@QT_VERSION_MAJOR@_FARSTREAM_SHARE_DIR                "@TELEPATHY_QT_DATA_DIR@")
+    set(TELEPATHY_QT@Qt5Core_VERSION_MAJOR@_FARSTREAM_INCLUDE_DIR              "@TELEPATHY_QT_INCLUDE_DIR@")
+    set(TELEPATHY_QT@Qt5Core_VERSION_MAJOR@_FARSTREAM_LIB_DIR                  "@TELEPATHY_QT_LIB_DIR@")
+    set(TELEPATHY_QT@Qt5Core_VERSION_MAJOR@_FARSTREAM_SHARE_DIR                "@TELEPATHY_QT_DATA_DIR@")
 
-    find_package(TelepathyQt@QT_VERSION_MAJOR@ REQUIRED)
+    find_package(TelepathyQt@Qt5Core_VERSION_MAJOR@ REQUIRED)
 
-    set(TELEPATHY_QT@QT_VERSION_MAJOR@_FARSTREAM_LIBRARIES telepathy-qt@QT_VERSION_MAJOR@-farstream)
-endif(NOT TelepathyQt@QT_VERSION_MAJOR@Farstream_FOUND)
+    set(TELEPATHY_QT@Qt5Core_VERSION_MAJOR@_FARSTREAM_LIBRARIES telepathy-qt@Qt5Core_VERSION_MAJOR@-farstream)
+endif(NOT TelepathyQt@Qt5Core_VERSION_MAJOR@Farstream_FOUND)
diff -ruNx .bzr -x debian/ telepathy-qt-0.9.3/TelepathyQt/Farstream/TelepathyQtFarstream.pc.in telepathy-qt/TelepathyQt/Farstream/TelepathyQtFarstream.pc.in
--- telepathy-qt-0.9.3/TelepathyQt/Farstream/TelepathyQtFarstream.pc.in	2012-07-13 19:40:23.000000000 +0200
+++ telepathy-qt/TelepathyQt/Farstream/TelepathyQtFarstream.pc.in	2013-02-24 19:22:09.168508000 +0100
@@ -3,9 +3,9 @@
 libdir=${CMAKE_INSTALL_PREFIX}/${LIB_INSTALL_DIR}
 includedir=${CMAKE_INSTALL_PREFIX}/${INCLUDE_INSTALL_DIR}
 
-Name: TelepathyQt${QT_VERSION_MAJOR}Farstream
+Name: TelepathyQt${Qt5Core_VERSION_MAJOR}Farstream
 Description: Qt Telepathy Farstream utility library for the Telepathy framework
 Version: ${PACKAGE_VERSION}
-Requires.private: QtCore >= ${QT_MIN_VERSION}, QtCore < ${QT_MAX_VERSION}, QtDBus >= ${QT_MIN_VERSION}, QtDBus < ${QT_MAX_VERSION}, telepathy-glib >= ${TELEPATHY_GLIB_MIN_VERSION}, telepathy-farstream >= ${TELEPATHY_FARSTREAM_MIN_VERSION}, TelepathyQt${QT_VERSION_MAJOR} = ${PACKAGE_VERSION}
-Libs: -L${CMAKE_INSTALL_PREFIX}/${LIB_INSTALL_DIR} -ltelepathy-qt${QT_VERSION_MAJOR}-farstream
-Cflags: -I${CMAKE_INSTALL_PREFIX}/${INCLUDE_INSTALL_DIR}/telepathy-qt${QT_VERSION_MAJOR}
+Requires.private: Qt5Core >= ${QT_MIN_VERSION}, Qt5Core < ${QT_MAX_VERSION}, Qt5DBus >= ${QT_MIN_VERSION}, Qt5DBus < ${QT_MAX_VERSION}, telepathy-glib >= ${TELEPATHY_GLIB_MIN_VERSION}, telepathy-farstream >= ${TELEPATHY_FARSTREAM_MIN_VERSION}, TelepathyQt${Qt5Core_VERSION_MAJOR} = ${PACKAGE_VERSION}
+Libs: -L${CMAKE_INSTALL_PREFIX}/${LIB_INSTALL_DIR} -ltelepathy-qt${Qt5Core_VERSION_MAJOR}-farstream
+Cflags: -I${CMAKE_INSTALL_PREFIX}/${INCLUDE_INSTALL_DIR}/telepathy-qt${Qt5Core_VERSION_MAJOR}
diff -ruNx .bzr -x debian/ telepathy-qt-0.9.3/TelepathyQt/Farstream/TelepathyQtFarstream-uninstalled.pc.in telepathy-qt/TelepathyQt/Farstream/TelepathyQtFarstream-uninstalled.pc.in
--- telepathy-qt-0.9.3/TelepathyQt/Farstream/TelepathyQtFarstream-uninstalled.pc.in	2012-07-13 19:40:23.000000000 +0200
+++ telepathy-qt/TelepathyQt/Farstream/TelepathyQtFarstream-uninstalled.pc.in	2013-02-24 19:22:09.168508000 +0100
@@ -3,9 +3,9 @@
 abs_top_builddir=${CMAKE_BINARY_DIR}
 abs_top_srcdir=${CMAKE_SOURCE_DIR}
 
-Name: TelepathyQt${QT_VERSION_MAJOR}Farstream (uninstalled copy)
+Name: TelepathyQt${Qt5Core_VERSION_MAJOR}Farstream (uninstalled copy)
 Description: Qt Telepathy Farstream utility library for the Telepathy framework
 Version: ${PACKAGE_VERSION}
-Requires.private: QtCore >= ${QT_MIN_VERSION}, QtCore < ${QT_MAX_VERSION}, QtDBus >= ${QT_MIN_VERSION}, QtDBus < ${QT_MAX_VERSION}, telepathy-glib >= ${TELEPATHY_GLIB_MIN_VERSION}, telepathy-farstream >= ${TELEPATHY_FARSTREAM_MIN_VERSION}, TelepathyQt${QT_VERSION_MAJOR} = ${PACKAGE_VERSION}
-Libs: ${CMAKE_BINARY_DIR}/TelepathyQt${QT_VERSION_MAJOR}/Farstream/libtelepathy-qt${QT_VERSION_MAJOR}-farstream.so
+Requires.private: Qt5Core >= ${QT_MIN_VERSION}, Qt5Core < ${QT_MAX_VERSION}, Qt5DBus >= ${QT_MIN_VERSION}, Qt5DBus < ${QT_MAX_VERSION}, telepathy-glib >= ${TELEPATHY_GLIB_MIN_VERSION}, telepathy-farstream >= ${TELEPATHY_FARSTREAM_MIN_VERSION}, TelepathyQt${Qt5Core_VERSION_MAJOR} = ${PACKAGE_VERSION}
+Libs: ${CMAKE_BINARY_DIR}/TelepathyQt${Qt5Core_VERSION_MAJOR}/Farstream/libtelepathy-qt${Qt5Core_VERSION_MAJOR}-farstream.so
 Cflags: -I${CMAKE_SOURCE_DIR} -I${CMAKE_BINARY_DIR}
diff -ruNx .bzr -x debian/ telepathy-qt-0.9.3/TelepathyQt/TelepathyQtConfig.cmake.in telepathy-qt/TelepathyQt/TelepathyQtConfig.cmake.in
--- telepathy-qt-0.9.3/TelepathyQt/TelepathyQtConfig.cmake.in	2012-07-13 19:40:23.000000000 +0200
+++ telepathy-qt/TelepathyQt/TelepathyQtConfig.cmake.in	2013-02-24 19:22:09.168508000 +0100
@@ -1,28 +1,28 @@
-# TelepathyQt@QT_VERSION_MAJOR@Config.cmake is generated by CMake from TelepathyQt/TelepathyQtConfig.cmake.in.
+# TelepathyQt@Qt5Core_VERSION_MAJOR@Config.cmake is generated by CMake from TelepathyQt/TelepathyQtConfig.cmake.in.
 # Any changed value in this file will be overwritten by CMake.
 
-if(NOT TelepathyQt@QT_VERSION_MAJOR@_FOUND)
+if(NOT TelepathyQt@Qt5Core_VERSION_MAJOR@_FOUND)
     # set the version number
-    set(TELEPATHY_QT@QT_VERSION_MAJOR@_VERSION_MAJOR @TP_QT_MAJOR_VERSION@)
-    set(TELEPATHY_QT@QT_VERSION_MAJOR@_VERSION_MINOR @TP_QT_MINOR_VERSION@)
-    set(TELEPATHY_QT@QT_VERSION_MAJOR@_VERSION_MICRO @TP_QT_MICRO_VERSION@)
-    set(TELEPATHY_QT@QT_VERSION_MAJOR@_VERSION_NANO @TP_QT_NANO_VERSION@)
-    set(TELEPATHY_QT@QT_VERSION_MAJOR@_VERSION @PACKAGE_VERSION@)
+    set(TELEPATHY_QT@Qt5Core_VERSION_MAJOR@_VERSION_MAJOR @TP_QT_MAJOR_VERSION@)
+    set(TELEPATHY_QT@Qt5Core_VERSION_MAJOR@_VERSION_MINOR @TP_QT_MINOR_VERSION@)
+    set(TELEPATHY_QT@Qt5Core_VERSION_MAJOR@_VERSION_MICRO @TP_QT_MICRO_VERSION@)
+    set(TELEPATHY_QT@Qt5Core_VERSION_MAJOR@_VERSION_NANO @TP_QT_NANO_VERSION@)
+    set(TELEPATHY_QT@Qt5Core_VERSION_MAJOR@_VERSION @PACKAGE_VERSION@)
 
     # set the directories
-    if(NOT TELEPATHY_QT@QT_VERSION_MAJOR@_INSTALL_DIR)
-    set(TELEPATHY_QT@QT_VERSION_MAJOR@_INSTALL_DIR "@CMAKE_INSTALL_PREFIX@")
-    endif(NOT TELEPATHY_QT@QT_VERSION_MAJOR@_INSTALL_DIR)
+    if(NOT TELEPATHY_QT@Qt5Core_VERSION_MAJOR@_INSTALL_DIR)
+    set(TELEPATHY_QT@Qt5Core_VERSION_MAJOR@_INSTALL_DIR "@CMAKE_INSTALL_PREFIX@")
+    endif(NOT TELEPATHY_QT@Qt5Core_VERSION_MAJOR@_INSTALL_DIR)
 
-    set(TELEPATHY_QT@QT_VERSION_MAJOR@_INCLUDE_DIR              "@TELEPATHY_QT_INCLUDE_DIR@")
-    set(TELEPATHY_QT@QT_VERSION_MAJOR@_LIB_DIR                  "@TELEPATHY_QT_LIB_DIR@")
-    set(TELEPATHY_QT@QT_VERSION_MAJOR@_SHARE_DIR                "@TELEPATHY_QT_DATA_DIR@")
+    set(TELEPATHY_QT@Qt5Core_VERSION_MAJOR@_INCLUDE_DIR              "@TELEPATHY_QT_INCLUDE_DIR@")
+    set(TELEPATHY_QT@Qt5Core_VERSION_MAJOR@_LIB_DIR                  "@TELEPATHY_QT_LIB_DIR@")
+    set(TELEPATHY_QT@Qt5Core_VERSION_MAJOR@_SHARE_DIR                "@TELEPATHY_QT_DATA_DIR@")
 
     # attempt to find the generated TelepathyQt4Targets.cmake in the same directory
-    get_filename_component(_TPQT@QT_VERSION_MAJOR@_CONFIG_DIR "${CMAKE_CURRENT_LIST_FILE}" PATH)
-    find_file(_TPQT@QT_VERSION_MAJOR@_TARGETS_FILE TelepathyQt@QT_VERSION_MAJOR@Targets.cmake PATHS ${_TPQT@QT_VERSION_MAJOR@_CONFIG_DIR} NO_DEFAULT_PATH)
+    get_filename_component(_TPQT@Qt5Core_VERSION_MAJOR@_CONFIG_DIR "${CMAKE_CURRENT_LIST_FILE}" PATH)
+    find_file(_TPQT@Qt5Core_VERSION_MAJOR@_TARGETS_FILE TelepathyQt@Qt5Core_VERSION_MAJOR@Targets.cmake PATHS ${_TPQT@Qt5Core_VERSION_MAJOR@_CONFIG_DIR} NO_DEFAULT_PATH)
 
-    # set the TELEPATHY_QT@QT_VERSION_MAJOR@_LIBRARIES variable
-    include(${_TPQT@QT_VERSION_MAJOR@_TARGETS_FILE})
-    set(TELEPATHY_QT@QT_VERSION_MAJOR@_LIBRARIES telepathy-qt@QT_VERSION_MAJOR@)
-endif(NOT TelepathyQt@QT_VERSION_MAJOR@_FOUND)
+    # set the TELEPATHY_QT@Qt5Core_VERSION_MAJOR@_LIBRARIES variable
+    include(${_TPQT@Qt5Core_VERSION_MAJOR@_TARGETS_FILE})
+    set(TELEPATHY_QT@Qt5Core_VERSION_MAJOR@_LIBRARIES telepathy-qt@Qt5Core_VERSION_MAJOR@)
+endif(NOT TelepathyQt@Qt5Core_VERSION_MAJOR@_FOUND)
diff -ruNx .bzr -x debian/ telepathy-qt-0.9.3/TelepathyQt/TelepathyQt.pc.in telepathy-qt/TelepathyQt/TelepathyQt.pc.in
--- telepathy-qt-0.9.3/TelepathyQt/TelepathyQt.pc.in	2012-07-13 19:40:23.000000000 +0200
+++ telepathy-qt/TelepathyQt/TelepathyQt.pc.in	2013-02-24 19:22:09.168508000 +0100
@@ -3,9 +3,9 @@
 libdir=${CMAKE_INSTALL_PREFIX}/${LIB_INSTALL_DIR}
 includedir=${CMAKE_INSTALL_PREFIX}/${INCLUDE_INSTALL_DIR}
 
-Name: TelepathyQt${QT_VERSION_MAJOR}
+Name: TelepathyQt${Qt5Core_VERSION_MAJOR}
 Description: Qt utility library for the Telepathy framework
 Version: ${PACKAGE_VERSION}
-Requires.private: QtCore >= ${QT_MIN_VERSION}, QtCore < ${QT_MAX_VERSION}, QtDBus >= ${QT_MIN_VERSION}, QtDBus < ${QT_MAX_VERSION}, QtNetwork >= ${QT_MIN_VERSION}, QtNetwork < ${QT_MAX_VERSION}, QtXml >= ${QT_MIN_VERSION}, QtXml < ${QT_MAX_VERSION}
-Libs: -L${CMAKE_INSTALL_PREFIX}/${LIB_INSTALL_DIR} -ltelepathy-qt${QT_VERSION_MAJOR}
-Cflags: -I${CMAKE_INSTALL_PREFIX}/${INCLUDE_INSTALL_DIR}/telepathy-qt${QT_VERSION_MAJOR}
+Requires.private: Qt5Core >= ${QT_MIN_VERSION}, Qt5Core < ${QT_MAX_VERSION}, Qt5DBus >= ${QT_MIN_VERSION}, Qt5DBus < ${QT_MAX_VERSION}, Qt5Network >= ${QT_MIN_VERSION}, Qt5Network < ${QT_MAX_VERSION}, Qt5Xml >= ${QT_MIN_VERSION}, Qt5Xml < ${QT_MAX_VERSION}
+Libs: -L${CMAKE_INSTALL_PREFIX}/${LIB_INSTALL_DIR} -ltelepathy-qt${Qt5Core_VERSION_MAJOR}
+Cflags: -I${CMAKE_INSTALL_PREFIX}/${INCLUDE_INSTALL_DIR}/telepathy-qt${Qt5Core_VERSION_MAJOR}
diff -ruNx .bzr -x debian/ telepathy-qt-0.9.3/TelepathyQt/TelepathyQtServiceConfig.cmake.in telepathy-qt/TelepathyQt/TelepathyQtServiceConfig.cmake.in
--- telepathy-qt-0.9.3/TelepathyQt/TelepathyQtServiceConfig.cmake.in	2012-07-13 19:40:23.000000000 +0200
+++ telepathy-qt/TelepathyQt/TelepathyQtServiceConfig.cmake.in	2013-02-24 19:22:09.168508000 +0100
@@ -1,22 +1,22 @@
-# TelepathyQt@QT_VERSION_MAJOR@ServiceConfig.cmake is generated by CMake from TelepathyQt/TelepathyQtServiceConfig.cmake.in.
+# TelepathyQt@Qt5Core_VERSION_MAJOR@ServiceConfig.cmake is generated by CMake from TelepathyQt/TelepathyQtServiceConfig.cmake.in.
 # Any changed value in this file will be overwritten by CMake.
 
 # set the version number
-set(TELEPATHY_QT@QT_VERSION_MAJOR@_SERVICE_VERSION_MAJOR @TP_QT_MAJOR_VERSION@)
-set(TELEPATHY_QT@QT_VERSION_MAJOR@_SERVICE_VERSION_MINOR @TP_QT_MINOR_VERSION@)
-set(TELEPATHY_QT@QT_VERSION_MAJOR@_SERVICE_VERSION_MICRO @TP_QT_MICRO_VERSION@)
-set(TELEPATHY_QT@QT_VERSION_MAJOR@_SERVICE_VERSION_NANO @TP_QT_NANO_VERSION@)
-set(TELEPATHY_QT@QT_VERSION_MAJOR@_SERVICE_VERSION @PACKAGE_VERSION@)
+set(TELEPATHY_QT@Qt5Core_VERSION_MAJOR@_SERVICE_VERSION_MAJOR @TP_QT_MAJOR_VERSION@)
+set(TELEPATHY_QT@Qt5Core_VERSION_MAJOR@_SERVICE_VERSION_MINOR @TP_QT_MINOR_VERSION@)
+set(TELEPATHY_QT@Qt5Core_VERSION_MAJOR@_SERVICE_VERSION_MICRO @TP_QT_MICRO_VERSION@)
+set(TELEPATHY_QT@Qt5Core_VERSION_MAJOR@_SERVICE_VERSION_NANO @TP_QT_NANO_VERSION@)
+set(TELEPATHY_QT@Qt5Core_VERSION_MAJOR@_SERVICE_VERSION @PACKAGE_VERSION@)
 
 # set the directories
-if(NOT TELEPATHY_QT@QT_VERSION_MAJOR@_SERVICE_INSTALL_DIR)
-   set(TELEPATHY_QT@QT_VERSION_MAJOR@_SERVICE_INSTALL_DIR "@CMAKE_INSTALL_PREFIX@")
-endif(NOT TELEPATHY_QT@QT_VERSION_MAJOR@_SERVICE_INSTALL_DIR)
+if(NOT TELEPATHY_QT@Qt5Core_VERSION_MAJOR@_SERVICE_INSTALL_DIR)
+   set(TELEPATHY_QT@Qt5Core_VERSION_MAJOR@_SERVICE_INSTALL_DIR "@CMAKE_INSTALL_PREFIX@")
+endif(NOT TELEPATHY_QT@Qt5Core_VERSION_MAJOR@_SERVICE_INSTALL_DIR)
 
-set(TELEPATHY_QT@QT_VERSION_MAJOR@_SERVICE_INCLUDE_DIR              "@TELEPATHY_QT_INCLUDE_DIR@")
-set(TELEPATHY_QT@QT_VERSION_MAJOR@_SERVICE_LIB_DIR                  "@TELEPATHY_QT_LIB_DIR@")
-set(TELEPATHY_QT@QT_VERSION_MAJOR@_SERVICE_SHARE_DIR                "@TELEPATHY_QT_DATA_DIR@")
+set(TELEPATHY_QT@Qt5Core_VERSION_MAJOR@_SERVICE_INCLUDE_DIR              "@TELEPATHY_QT_INCLUDE_DIR@")
+set(TELEPATHY_QT@Qt5Core_VERSION_MAJOR@_SERVICE_LIB_DIR                  "@TELEPATHY_QT_LIB_DIR@")
+set(TELEPATHY_QT@Qt5Core_VERSION_MAJOR@_SERVICE_SHARE_DIR                "@TELEPATHY_QT_DATA_DIR@")
 
-find_package(TelepathyQt@QT_VERSION_MAJOR@ REQUIRED)
+find_package(TelepathyQt@Qt5Core_VERSION_MAJOR@ REQUIRED)
 
-set(TELEPATHY_QT@QT_VERSION_MAJOR@_SERVICE_LIBRARIES telepathy-qt@QT_VERSION_MAJOR@-service)
+set(TELEPATHY_QT@Qt5Core_VERSION_MAJOR@_SERVICE_LIBRARIES telepathy-qt@Qt5Core_VERSION_MAJOR@-service)
diff -ruNx .bzr -x debian/ telepathy-qt-0.9.3/TelepathyQt/TelepathyQtService.pc.in telepathy-qt/TelepathyQt/TelepathyQtService.pc.in
--- telepathy-qt-0.9.3/TelepathyQt/TelepathyQtService.pc.in	2012-07-13 19:40:23.000000000 +0200
+++ telepathy-qt/TelepathyQt/TelepathyQtService.pc.in	2013-02-24 19:22:09.168508000 +0100
@@ -3,9 +3,9 @@
 libdir=${CMAKE_INSTALL_PREFIX}/${LIB_INSTALL_DIR}
 includedir=${CMAKE_INSTALL_PREFIX}/${INCLUDE_INSTALL_DIR}
 
-Name: TelepathyQt${QT_VERSION_MAJOR}Service
+Name: TelepathyQt${Qt5Core_VERSION_MAJOR}Service
 Description: Qt Telepathy Service side bindings
 Version: ${PACKAGE_VERSION}
-Requires.private: QtCore >= ${QT_MIN_VERSION}, QtCore < ${QT_MAX_VERSION}, QtDBus >= ${QT_MIN_VERSION}, QtDBus < ${QT_MAX_VERSION}, TelepathyQt${QT_VERSION_MAJOR} = ${PACKAGE_VERSION}
-Libs: -L${CMAKE_INSTALL_PREFIX}/${LIB_INSTALL_DIR} -ltelepathy-qt${QT_VERSION_MAJOR}-service
-Cflags: -I${CMAKE_INSTALL_PREFIX}/${INCLUDE_INSTALL_DIR}/telepathy-qt${QT_VERSION_MAJOR}
+Requires.private: Qt5Core >= ${QT_MIN_VERSION}, Qt5Core < ${QT_MAX_VERSION}, Qt5DBus >= ${QT_MIN_VERSION}, Qt5DBus < ${QT_MAX_VERSION}, TelepathyQt${Qt5Core_VERSION_MAJOR} = ${PACKAGE_VERSION}
+Libs: -L${CMAKE_INSTALL_PREFIX}/${LIB_INSTALL_DIR} -ltelepathy-qt${Qt5Core_VERSION_MAJOR}-service
+Cflags: -I${CMAKE_INSTALL_PREFIX}/${INCLUDE_INSTALL_DIR}/telepathy-qt${Qt5Core_VERSION_MAJOR}
diff -ruNx .bzr -x debian/ telepathy-qt-0.9.3/TelepathyQt/TelepathyQtService-uninstalled.pc.in telepathy-qt/TelepathyQt/TelepathyQtService-uninstalled.pc.in
--- telepathy-qt-0.9.3/TelepathyQt/TelepathyQtService-uninstalled.pc.in	2012-07-13 19:40:23.000000000 +0200
+++ telepathy-qt/TelepathyQt/TelepathyQtService-uninstalled.pc.in	2013-02-24 19:22:09.168508000 +0100
@@ -3,9 +3,9 @@
 abs_top_builddir=${CMAKE_BINARY_DIR}
 abs_top_srcdir=${CMAKE_SOURCE_DIR}
 
-Name: TelepathyQt${QT_VERSION_MAJOR}Service (uninstalled copy)
+Name: TelepathyQt${Qt5Core_VERSION_MAJOR}Service (uninstalled copy)
 Description: Qt Telepathy Service side bindings
 Version: ${PACKAGE_VERSION}
-Requires.private: QtCore >= ${QT_MIN_VERSION}, QtCore < ${QT_MAX_VERSION}, QtDBus >= ${QT_MIN_VERSION}, QtDBus < ${QT_MAX_VERSION}, TelepathyQt${QT_VERSION_MAJOR} = ${PACKAGE_VERSION}
-Libs: ${CMAKE_BINARY_DIR}/TelepathyQt/Farsight/libtelepathy-qt${QT_VERSION_MAJOR}-service.so
+Requires.private: Qt5Core >= ${QT_MIN_VERSION}, Qt5Core < ${QT_MAX_VERSION}, Qt5DBus >= ${QT_MIN_VERSION}, Qt5DBus < ${QT_MAX_VERSION}, TelepathyQt${Qt5Core_VERSION_MAJOR} = ${PACKAGE_VERSION}
+Libs: ${CMAKE_BINARY_DIR}/TelepathyQt/Farsight/libtelepathy-qt${Qt5Core_VERSION_MAJOR}-service.so
 Cflags: -I${CMAKE_SOURCE_DIR} -I${CMAKE_BINARY_DIR}
diff -ruNx .bzr -x debian/ telepathy-qt-0.9.3/TelepathyQt/TelepathyQt-uninstalled.pc.in telepathy-qt/TelepathyQt/TelepathyQt-uninstalled.pc.in
--- telepathy-qt-0.9.3/TelepathyQt/TelepathyQt-uninstalled.pc.in	2012-07-13 19:40:23.000000000 +0200
+++ telepathy-qt/TelepathyQt/TelepathyQt-uninstalled.pc.in	2013-02-24 19:22:09.168508000 +0100
@@ -3,9 +3,9 @@
 abs_top_builddir=${CMAKE_BINARY_DIR}
 abs_top_srcdir=${CMAKE_SOURCE_DIR}
 
-Name: TelepathyQt${QT_VERSION_MAJOR} (uninstalled copy)
+Name: TelepathyQt${Qt5Core_VERSION_MAJOR} (uninstalled copy)
 Description: Qt utility library for the Telepathy framework
 Version: ${PACKAGE_VERSION}
-Requires.private: QtCore >= ${QT_MIN_VERSION}, QtCore < ${QT_MAX_VERSION}, QtDBus >= ${QT_MIN_VERSION}, QtDBus < ${QT_MAX_VERSION}, QtNetwork >= ${QT_MIN_VERSION}, QtNetwork < ${QT_MAX_VERSION}, QtXml >= ${QT_MIN_VERSION}, QtXml < ${QT_MAX_VERSION}
-Libs: ${CMAKE_BINARY_DIR}/TelepathyQt/libtelepathy-qt${QT_VERSION_MAJOR}.so
+Requires.private: Qt5Core >= ${QT_MIN_VERSION}, Qt5Core < ${QT_MAX_VERSION}, Qt5DBus >= ${QT_MIN_VERSION}, Qt5DBus < ${QT_MAX_VERSION}, Qt5Network >= ${QT_MIN_VERSION}, Qt5Network < ${QT_MAX_VERSION}, Qt5Xml >= ${QT_MIN_VERSION}, Qt5Xml < ${QT_MAX_VERSION}
+Libs: ${CMAKE_BINARY_DIR}/TelepathyQt/libtelepathy-qt${Qt5Core_VERSION_MAJOR}.so
 Cflags: -I${CMAKE_SOURCE_DIR} -I${CMAKE_BINARY_DIR}
diff -ruNx .bzr -x debian/ telepathy-qt-0.9.3/TelepathyQt/utils.cpp telepathy-qt/TelepathyQt/utils.cpp
--- telepathy-qt-0.9.3/TelepathyQt/utils.cpp	2012-07-13 19:40:23.000000000 +0200
+++ telepathy-qt/TelepathyQt/utils.cpp	2013-02-24 19:22:09.168508000 +0100
@@ -204,7 +204,7 @@
         case QVariant::StringList:
             {
                 QStringList list;
-                QByteArray rawValue = value.toAscii();
+                QByteArray rawValue = value.toLatin1();
                 if (KeyFile::unescapeStringList(rawValue, 0, rawValue.size(), list)) {
                     return QVariant(list);
                 } else {
diff -ruNx .bzr -x debian/ telepathy-qt-0.9.3/tests/dbus/account-channel-dispatcher.cpp telepathy-qt/tests/dbus/account-channel-dispatcher.cpp
--- telepathy-qt-0.9.3/tests/dbus/account-channel-dispatcher.cpp	2012-07-13 19:40:23.000000000 +0200
+++ telepathy-qt/tests/dbus/account-channel-dispatcher.cpp	2013-02-24 19:22:09.168508000 +0100
@@ -1061,7 +1061,7 @@
     guint handle = tp_handle_ensure(contactRepo, "someone@localhost", 0, 0);
 
     mChanPath = mConn->objectPath() + QLatin1String("/TextChannel");
-    QByteArray chanPath(mChanPath.toAscii());
+    QByteArray chanPath(mChanPath.toLatin1());
     ExampleEcho2Channel *textChanService = EXAMPLE_ECHO_2_CHANNEL(g_object_new(
                 EXAMPLE_TYPE_ECHO_2_CHANNEL,
                 "connection", mConn->service(),
diff -ruNx .bzr -x debian/ telepathy-qt-0.9.3/tests/dbus/chan-basics.cpp telepathy-qt/tests/dbus/chan-basics.cpp
--- telepathy-qt-0.9.3/tests/dbus/chan-basics.cpp	2012-07-13 19:40:23.000000000 +0200
+++ telepathy-qt/tests/dbus/chan-basics.cpp	2013-02-24 19:22:09.168508000 +0100
@@ -229,7 +229,7 @@
     guint handle = tp_handle_ensure(contactRepo, "someone@localhost", 0, 0);
 
     QString textChanPath = mConn->objectPath() + QLatin1String("/Channel");
-    QByteArray chanPath(textChanPath.toAscii());
+    QByteArray chanPath(textChanPath.toLatin1());
 
     TpTestsTextChannelNull *textChanService = TP_TESTS_TEXT_CHANNEL_NULL (g_object_new (
                 TP_TESTS_TYPE_TEXT_CHANNEL_NULL,
diff -ruNx .bzr -x debian/ telepathy-qt-0.9.3/tests/dbus/chan-conference.cpp telepathy-qt/tests/dbus/chan-conference.cpp
--- telepathy-qt-0.9.3/tests/dbus/chan-conference.cpp	2012-07-13 19:40:23.000000000 +0200
+++ telepathy-qt/tests/dbus/chan-conference.cpp	2013-02-24 19:22:09.168508000 +0100
@@ -98,7 +98,7 @@
     GPtrArray *initialChannels = g_ptr_array_new();
 
     mTextChan1Path = mConn->objectPath() + QLatin1String("/TextChannel/1");
-    chanPath = mTextChan1Path.toAscii();
+    chanPath = mTextChan1Path.toLatin1();
     mTextChan1Service = EXAMPLE_ECHO_CHANNEL(g_object_new(
                 EXAMPLE_TYPE_ECHO_CHANNEL,
                 "connection", mConn->service(),
@@ -108,7 +108,7 @@
     g_ptr_array_add(initialChannels, g_strdup(chanPath.data()));
 
     mTextChan2Path = mConn->objectPath() + QLatin1String("/TextChannel/2");
-    chanPath = mTextChan2Path.toAscii();
+    chanPath = mTextChan2Path.toLatin1();
     mTextChan2Service = EXAMPLE_ECHO_CHANNEL(g_object_new(
                 EXAMPLE_TYPE_ECHO_CHANNEL,
                 "connection", mConn->service(),
@@ -119,7 +119,7 @@
 
     // let's not add this one to initial channels
     mTextChan3Path = mConn->objectPath() + QLatin1String("/TextChannel/3");
-    chanPath = mTextChan3Path.toAscii();
+    chanPath = mTextChan3Path.toLatin1();
     mTextChan3Service = EXAMPLE_ECHO_CHANNEL(g_object_new(
                 EXAMPLE_TYPE_ECHO_CHANNEL,
                 "connection", mConn->service(),
@@ -128,7 +128,7 @@
                 NULL));
 
     mConferenceChanPath = mConn->objectPath() + QLatin1String("/ConferenceChannel");
-    chanPath = mConferenceChanPath.toAscii();
+    chanPath = mConferenceChanPath.toLatin1();
     mConferenceChanService = TP_TESTS_CONFERENCE_CHANNEL(g_object_new(
                 TP_TESTS_TYPE_CONFERENCE_CHANNEL,
                 "connection", mConn->service(),
@@ -229,7 +229,7 @@
                     SLOT(onConferenceChannelRemoved(const Tp::ChannelPtr &,
                             const Tp::Channel::GroupMemberChangeDetails &))));
     tp_tests_conference_channel_remove_channel (mConferenceChanService,
-            mChannelMerged->objectPath().toAscii().data());
+            mChannelMerged->objectPath().toLatin1().data());
     while (!mChannelRemovedDetailed) {
         QCOMPARE(mLoop->exec(), 0);
     }
diff -ruNx .bzr -x debian/ telepathy-qt-0.9.3/tests/dbus/chan-group.cpp telepathy-qt/tests/dbus/chan-group.cpp
--- telepathy-qt-0.9.3/tests/dbus/chan-group.cpp	2012-07-13 19:40:23.000000000 +0200
+++ telepathy-qt/tests/dbus/chan-group.cpp	2013-02-24 19:22:09.168508000 +0100
@@ -448,7 +448,7 @@
     guint handle = tp_handle_ensure(contactRepo, "someone@localhost", 0, 0);
 
     QString textChanPath = mConn->objectPath() + QLatin1String("/Channel");
-    QByteArray chanPath(textChanPath.toAscii());
+    QByteArray chanPath(textChanPath.toLatin1());
 
     TpTestsPropsGroupTextChannel *textChanService = TP_TESTS_PROPS_GROUP_TEXT_CHANNEL(g_object_new(
                 TP_TESTS_TYPE_PROPS_GROUP_TEXT_CHANNEL,
diff -ruNx .bzr -x debian/ telepathy-qt-0.9.3/tests/dbus/client.cpp telepathy-qt/tests/dbus/client.cpp
--- telepathy-qt-0.9.3/tests/dbus/client.cpp	2012-07-13 19:40:23.000000000 +0200
+++ telepathy-qt/tests/dbus/client.cpp	2013-02-24 19:22:09.168508000 +0100
@@ -451,7 +451,7 @@
 
     // create a Channel by magic, rather than doing D-Bus round-trips for it
     mText1ChanPath = mConn->objectPath() + QLatin1String("/TextChannel1");
-    QByteArray chanPath(mText1ChanPath.toAscii());
+    QByteArray chanPath(mText1ChanPath.toLatin1());
     mText1ChanService = EXAMPLE_ECHO_CHANNEL(g_object_new(
                 EXAMPLE_TYPE_ECHO_CHANNEL,
                 "connection", mConn->service(),
@@ -460,7 +460,7 @@
                 NULL));
 
     mText2ChanPath = mConn->objectPath() + QLatin1String("/TextChannel2");
-    chanPath = mText2ChanPath.toAscii();
+    chanPath = mText2ChanPath.toLatin1();
     mText2ChanService = EXAMPLE_ECHO_CHANNEL(g_object_new(
                 EXAMPLE_TYPE_ECHO_CHANNEL,
                 "connection", mConn->service(),
diff -ruNx .bzr -x debian/ telepathy-qt-0.9.3/tests/dbus/client-factories.cpp telepathy-qt/tests/dbus/client-factories.cpp
--- telepathy-qt-0.9.3/tests/dbus/client-factories.cpp	2012-07-13 19:40:23.000000000 +0200
+++ telepathy-qt/tests/dbus/client-factories.cpp	2013-02-24 19:22:09.168508000 +0100
@@ -516,7 +516,7 @@
     guint handle = tp_handle_ensure(mContactRepo, "someone@localhost", 0, 0);
 
     mText1ChanPath = mConnPath + QLatin1String("/TextChannel1");
-    QByteArray chanPath(mText1ChanPath.toAscii());
+    QByteArray chanPath(mText1ChanPath.toLatin1());
     mText1ChanService = EXAMPLE_ECHO_CHANNEL(g_object_new(
                 EXAMPLE_TYPE_ECHO_CHANNEL,
                 "connection", mConnService,
@@ -525,7 +525,7 @@
                 NULL));
 
     mText2ChanPath = mConnPath + QLatin1String("/TextChannel2");
-    chanPath = mText2ChanPath.toAscii();
+    chanPath = mText2ChanPath.toLatin1();
     mText2ChanService = EXAMPLE_ECHO_CHANNEL(g_object_new(
                 EXAMPLE_TYPE_ECHO_CHANNEL,
                 "connection", mConnService,
diff -ruNx .bzr -x debian/ telepathy-qt-0.9.3/tests/dbus/CMakeLists.txt telepathy-qt/tests/dbus/CMakeLists.txt
--- telepathy-qt-0.9.3/tests/dbus/CMakeLists.txt	2012-07-13 19:40:23.000000000 +0200
+++ telepathy-qt/tests/dbus/CMakeLists.txt	2013-02-24 19:22:09.168508000 +0100
@@ -14,19 +14,19 @@
 
     add_definitions(-DQT_NO_KEYWORDS)
 
-    if (${QT_VERSION_MAJOR} EQUAL 4)
-        if (NOT ${QT_VERSION_MINOR} EQUAL 6)
+    if (${Qt5Core_VERSION_MAJOR} EQUAL 4)
+        if (NOT ${Qt5Core_VERSION_MINOR} EQUAL 6)
             # >= qt 4.7
             # FIXME - Re-enable racy tests once https://bugs.freedesktop.org/show_bug.cgi?id=43356 is
             #         fixed
             SET(ENABLE_TESTS_WITH_RACES_IN_QT_4_6 TRUE)
             SET(ENABLE_TESTS_WITH_ISSUES_IN_QT_5 TRUE)
-        endif (NOT ${QT_VERSION_MINOR} EQUAL 6)
-    else (${QT_VERSION_MAJOR} EQUAL 4)
+        endif (NOT ${Qt5Core_VERSION_MINOR} EQUAL 6)
+    else (${Qt5Core_VERSION_MAJOR} EQUAL 4)
         # Currently none - this variable is here in case some issues arise
         SET(ENABLE_TESTS_WITH_ISSUES_IN_QT_5 FALSE)
         SET(ENABLE_TESTS_WITH_RACES_IN_QT_4_6 TRUE)
-    endif (${QT_VERSION_MAJOR} EQUAL 4)
+    endif (${Qt5Core_VERSION_MAJOR} EQUAL 4)
 
     if(HAVE_TEST_PYTHON)
         tpqt_add_dbus_unit_test(AccountBasics account-basics tp-glib-tests tp-qt-tests-glib-helpers)
@@ -78,10 +78,10 @@
         endif(ENABLE_TP_GLIB_GIO_TESTS)
     endif (ENABLE_TESTS_WITH_RACES_IN_QT_4_6)
 
-    if(NOT (${QT_VERSION_MAJOR} EQUAL 4 AND ${QT_VERSION_MINOR} LESS 8))
+    if(NOT (${Qt5Core_VERSION_MAJOR} EQUAL 4 AND ${Qt5Core_VERSION_MINOR} LESS 8))
         message(STATUS "Enabling Qt 4.8+ tests")
         tpqt_add_dbus_unit_test(DBusTubeChannel dbus-tube-chan tp-glib-tests tp-qt-tests-glib-helpers)
-    endif(NOT (${QT_VERSION_MAJOR} EQUAL 4 AND ${QT_VERSION_MINOR} LESS 8))
+    endif(NOT (${Qt5Core_VERSION_MAJOR} EQUAL 4 AND ${Qt5Core_VERSION_MINOR} LESS 8))
 
 
 endif(ENABLE_TP_GLIB_TESTS)
@@ -91,8 +91,8 @@
 tpqt_add_dbus_unit_test(Types types)
 
 if(ENABLE_EXPERIMENTAL_SERVICE_SUPPORT)
-    tpqt_add_dbus_unit_test(BaseConnectionManager base-cm telepathy-qt${QT_VERSION_MAJOR}-service)
-    tpqt_add_dbus_unit_test(BaseProtocol base-protocol telepathy-qt${QT_VERSION_MAJOR}-service)
+    tpqt_add_dbus_unit_test(BaseConnectionManager base-cm telepathy-qt${Qt5Core_VERSION_MAJOR}-service)
+    tpqt_add_dbus_unit_test(BaseProtocol base-protocol telepathy-qt${Qt5Core_VERSION_MAJOR}-service)
 endif(ENABLE_EXPERIMENTAL_SERVICE_SUPPORT)
 
 # Make check target. In case of check, output on failure and put it into a log
diff -ruNx .bzr -x debian/ telepathy-qt-0.9.3/tests/dbus/contact-messenger.cpp telepathy-qt/tests/dbus/contact-messenger.cpp
--- telepathy-qt-0.9.3/tests/dbus/contact-messenger.cpp	2012-07-13 19:40:23.000000000 +0200
+++ telepathy-qt/tests/dbus/contact-messenger.cpp	2013-02-24 19:22:09.168508000 +0100
@@ -403,7 +403,7 @@
     guint handle = tp_handle_ensure(mContactRepo, "Ann", 0, 0);
 
     mMessagesChanPath = mConnPath + QLatin1String("/MessagesChannel");
-    QByteArray chanPath = mMessagesChanPath.toAscii();
+    QByteArray chanPath = mMessagesChanPath.toLatin1();
     mMessagesChanService = EXAMPLE_ECHO_2_CHANNEL(g_object_new(
                 EXAMPLE_TYPE_ECHO_2_CHANNEL,
                 "connection", mConnService,
diff -ruNx .bzr -x debian/ telepathy-qt-0.9.3/tests/dbus/contact-search-chan.cpp telepathy-qt/tests/dbus/contact-search-chan.cpp
--- telepathy-qt-0.9.3/tests/dbus/contact-search-chan.cpp	2012-07-13 19:40:23.000000000 +0200
+++ telepathy-qt/tests/dbus/contact-search-chan.cpp	2013-02-24 19:22:09.168508000 +0100
@@ -114,7 +114,7 @@
 
     QByteArray chan1Path;
     mChan1Path = mConn->objectPath() + QLatin1String("/ContactSearchChannel/1");
-    chan1Path = mChan1Path.toAscii();
+    chan1Path = mChan1Path.toLatin1();
     mChan1Service = TP_TESTS_CONTACT_SEARCH_CHANNEL(g_object_new(
                 TP_TESTS_TYPE_CONTACT_SEARCH_CHANNEL,
                 "connection", mConn->service(),
@@ -123,7 +123,7 @@
 
     QByteArray chan2Path;
     mChan2Path = mConn->objectPath() + QLatin1String("/ContactSearchChannel/2");
-    chan2Path = mChan2Path.toAscii();
+    chan2Path = mChan2Path.toLatin1();
     mChan2Service = TP_TESTS_CONTACT_SEARCH_CHANNEL(g_object_new(
                 TP_TESTS_TYPE_CONTACT_SEARCH_CHANNEL,
                 "connection", mConn->service(),
diff -ruNx .bzr -x debian/ telepathy-qt-0.9.3/tests/dbus/properties.cpp telepathy-qt/tests/dbus/properties.cpp
--- telepathy-qt-0.9.3/tests/dbus/properties.cpp	2012-07-13 19:40:23.000000000 +0200
+++ telepathy-qt/tests/dbus/properties.cpp	2013-02-24 19:22:09.168508000 +0100
@@ -104,7 +104,7 @@
             "a.random.interface", changed, NULL);
 
     tp_svc_dbus_properties_emit_properties_changed (mConnService,
-            mConn->interface().toAscii().data(), changed, NULL);
+            mConn->interface().toLatin1().data(), changed, NULL);
 
     QCOMPARE(spy.count(), 0);
 
diff -ruNx .bzr -x debian/ telepathy-qt-0.9.3/tests/dbus/streamed-media-chan.cpp telepathy-qt/tests/dbus/streamed-media-chan.cpp
--- telepathy-qt-0.9.3/tests/dbus/streamed-media-chan.cpp	2012-07-13 19:40:23.000000000 +0200
+++ telepathy-qt/tests/dbus/streamed-media-chan.cpp	2013-02-24 19:22:09.168508000 +0100
@@ -1127,7 +1127,7 @@
                     SIGNAL(localHoldStateChanged(Tp::LocalHoldState, Tp::LocalHoldStateReason)),
                     SLOT(onLocalHoldStateChanged(Tp::LocalHoldState, Tp::LocalHoldStateReason))));
     // Request hold
-    QWeakPointer<PendingOperation> holdOp = mChan->requestHold(true);
+    QPointer<PendingOperation> holdOp = mChan->requestHold(true);
     while (mLocalHoldStates.size() != 2 || (holdOp && !holdOp.data()->isFinished())) {
         mLoop->processEvents();
     }
diff -ruNx .bzr -x debian/ telepathy-qt-0.9.3/tests/dbus/stream-tube-handlers.cpp telepathy-qt/tests/dbus/stream-tube-handlers.cpp
--- telepathy-qt-0.9.3/tests/dbus/stream-tube-handlers.cpp	2012-07-13 19:40:23.000000000 +0200
+++ telepathy-qt/tests/dbus/stream-tube-handlers.cpp	2013-02-24 19:22:09.168508000 +0100
@@ -1209,7 +1209,7 @@
 
     // Pass it a text channel, and with no satisfied requests
     QString textChanPath = mConn->objectPath() + QLatin1String("/TextChannel");
-    QByteArray chanPath(textChanPath.toAscii());
+    QByteArray chanPath(textChanPath.toLatin1());
     ExampleEchoChannel *textChanService = EXAMPLE_ECHO_CHANNEL(g_object_new(
                 EXAMPLE_TYPE_ECHO_CHANNEL,
                 "connection", mConn->service(),
diff -ruNx .bzr -x debian/ telepathy-qt-0.9.3/tests/dbus/text-chan.cpp telepathy-qt/tests/dbus/text-chan.cpp
--- telepathy-qt-0.9.3/tests/dbus/text-chan.cpp	2012-07-13 19:40:23.000000000 +0200
+++ telepathy-qt/tests/dbus/text-chan.cpp	2013-02-24 19:22:09.168508000 +0100
@@ -145,7 +145,7 @@
 
     // create a Channel by magic, rather than doing D-Bus round-trips for it
     mTextChanPath = mConn->objectPath() + QLatin1String("/TextChannel");
-    QByteArray chanPath(mTextChanPath.toAscii());
+    QByteArray chanPath(mTextChanPath.toLatin1());
     mTextChanService = EXAMPLE_ECHO_CHANNEL(g_object_new(
                 EXAMPLE_TYPE_ECHO_CHANNEL,
                 "connection", mConn->service(),
@@ -154,7 +154,7 @@
                 NULL));
 
     mMessagesChanPath = mConn->objectPath() + QLatin1String("/MessagesChannel");
-    chanPath = mMessagesChanPath.toAscii();
+    chanPath = mMessagesChanPath.toLatin1();
     mMessagesChanService = EXAMPLE_ECHO_2_CHANNEL(g_object_new(
                 EXAMPLE_TYPE_ECHO_2_CHANNEL,
                 "connection", mConn->service(),
diff -ruNx .bzr -x debian/ telepathy-qt-0.9.3/tests/lib/CMakeLists.txt telepathy-qt/tests/lib/CMakeLists.txt
--- telepathy-qt-0.9.3/tests/lib/CMakeLists.txt	2012-07-13 19:40:23.000000000 +0200
+++ telepathy-qt/tests/lib/CMakeLists.txt	2013-02-24 19:22:09.168508000 +0100
@@ -22,7 +22,7 @@
 endforeach(moc_src ${tp_qt_tests_MOC_SRCS})
 
 add_library(tp-qt-tests ${tp_qt_tests_SRCS})
-target_link_libraries(tp-qt-tests ${QT_QTCORE_LIBRARY} ${QT_QTDBUS_LIBRARY} telepathy-qt${QT_VERSION_MAJOR})
+target_link_libraries(tp-qt-tests ${Qt5Core_LIBRARIES} ${Qt5DBus_LIBRARIES} telepathy-qt${Qt5Core_VERSION_MAJOR})
 
 if(ENABLE_TP_GLIB_TESTS)
     add_subdirectory(glib)
diff -ruNx .bzr -x debian/ telepathy-qt-0.9.3/tests/lib/glib-helpers/CMakeLists.txt telepathy-qt/tests/lib/glib-helpers/CMakeLists.txt
--- telepathy-qt-0.9.3/tests/lib/glib-helpers/CMakeLists.txt	2012-07-13 19:40:23.000000000 +0200
+++ telepathy-qt/tests/lib/glib-helpers/CMakeLists.txt	2013-02-24 19:22:09.168508000 +0100
@@ -16,7 +16,7 @@
         ${GOBJECT_LIBRARIES}
         ${GLIB2_LIBRARIES}
         ${DBUS_GLIB_LIBRARIES}
-        ${QT_QTCORE_LIBRARY}
-        ${QT_QTDBUS_LIBRARY}
-        telepathy-qt${QT_VERSION_MAJOR})
+        ${Qt5Core_LIBRARIES}
+        ${Qt5DBus_LIBRARIES}
+        telepathy-qt${Qt5Core_VERSION_MAJOR})
 endif(ENABLE_TP_GLIB_TESTS)
